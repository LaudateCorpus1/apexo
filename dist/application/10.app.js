(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{313:function(e,t,n){"use strict";n.r(t),n.d(t,"OrthoPage",function(){return C});var i=n(1),a=n(7),s=n(3),c=n(9),l=n(5),o=n(2),r=n(8),d=n(287),m=n(301),h=n(291),p=n(6),u=n(295),b=n(28),E=n(297),O=n(152),v=n(0);let C=class extends v.Component{constructor(){super(...arguments),this.showAdditionPanel=!1,this.newPatientName="",this.selectedId="",this.viewWhich=0}get selectedCase(){return c.N.list.find(e=>e._id===this.selectedId)}get selectedPatient(){if(this.selectedCase&&this.selectedCase.patient)return this.selectedCase.patient}get canEdit(){return s.C.currentUser.canEditOrtho}render(){return v.createElement("div",{className:"orthodontic-cases-component p-15 p-l-10 p-r-10"},v.createElement(a.e,{maxItemsOnLoad:10,className:"orthodontic-cases-data-table",heads:[Object(s.B)("Orthodontic Patient"),Object(s.B)("Started/Finished Treatment"),Object(s.B)("Last/Next Appointment"),Object(s.B)("Total/Outstanding Payments")],rows:c.N.filtered.filter(e=>e.patient).map(e=>{const t=e.patient||new c.m;return{id:e._id,searchableString:e.searchableString,cells:[{dataValue:t.name,component:v.createElement("div",null,v.createElement(a.k,{name:t.name,secondaryElement:v.createElement("span",null,Object(s.B)(Object(c.J)(t.gender))," ","- ",t.age," ",Object(s.B)("years old")),size:3}),v.createElement("br",null),v.createElement(d.a,{content:Object(s.B)("Patient Details")},v.createElement(m.a,{className:"action-button",iconProps:{iconName:"DietPlanNotebook"},onClick:()=>{this.selectedId=e._id,this.viewWhich=1}})),v.createElement(d.a,{content:Object(s.B)("Dental History")},v.createElement(m.a,{className:"action-button",iconProps:{iconName:"Teeth"},onClick:()=>{this.selectedId=e._id,this.viewWhich=2}})),v.createElement(d.a,{content:Object(s.B)("Orthodontic Case Sheet")},v.createElement(m.a,{className:"action-button",iconProps:{iconName:"GroupedList"},onClick:()=>{this.selectedId=e._id,this.viewWhich=3}})),v.createElement(d.a,{content:Object(s.B)("Orthodontic Album")},v.createElement(m.a,{className:"action-button",iconProps:{iconName:"TripleColumn"},onClick:()=>{this.selectedId=e._id,this.viewWhich=4}})),v.createElement(d.a,{content:Object(s.B)("Gallery and X-Rays")},v.createElement(m.a,{className:"action-button",iconProps:{iconName:"PhotoCollection"},onClick:()=>{this.selectedId=e._id,this.viewWhich=5}})),s.C.currentUser.canViewAppointments?v.createElement(d.a,{content:Object(s.B)("Patient Appointments")},v.createElement(m.a,{className:"action-button",iconProps:{iconName:"Calendar"},onClick:()=>{this.selectedId=e._id,this.viewWhich=6}})):"",v.createElement(d.a,{content:Object(s.B)("Delete")},v.createElement(m.a,{className:"action-button delete",iconProps:{iconName:"Trash"},onClick:()=>c.N.deleteModal(e._id),disabled:!this.canEdit}))),className:"no-label"},{dataValue:e.isFinished?1/0:e.startedDate,component:v.createElement("div",null,v.createElement(a.l,{text:e.isStarted?Object(l.j)(e.startedDate,c.db.getSetting("date_format")):"",subText:e.isStarted?Object(s.B)("Started treatment"):Object(s.B)("Has not started yet"),size:3,onRenderInitials:()=>v.createElement(h.a,{iconName:"info"}),onClick:()=>{},initialsColor:e.isStarted?p.a.teal:p.a.transparent}),v.createElement("br",null),v.createElement(a.l,{text:e.isFinished?Object(l.j)(e.finishedDate,c.db.getSetting("date_format")):"",subText:e.isFinished?Object(s.B)("Finished treatment"):Object(s.B)("Has not finished yet"),size:3,onRenderInitials:()=>v.createElement(h.a,{iconName:"CheckMark"}),onClick:()=>{},initialsColor:e.isFinished?p.a.blue:p.a.transparent})),className:"hidden-xs"},{dataValue:(t.nextAppointment||{date:0}).date,component:v.createElement("div",null,v.createElement(a.l,{text:t.lastAppointment&&t.lastAppointment.treatment?t.lastAppointment.treatment.type:"",subText:t.lastAppointment?Object(l.j)(t.lastAppointment.date,c.db.getSetting("date_format")):Object(s.B)("No last appointment"),size:3,onRenderInitials:()=>v.createElement(h.a,{iconName:"Previous"}),onClick:()=>{},initialsColor:t.lastAppointment?void 0:p.a.transparent}),v.createElement("br",null),v.createElement(a.l,{text:t.nextAppointment&&t.nextAppointment.treatment?t.nextAppointment.treatment.type:"",subText:t.nextAppointment?Object(l.j)(t.nextAppointment.date,c.db.getSetting("date_format")):Object(s.B)("No next appointment"),size:3,onRenderInitials:()=>v.createElement(h.a,{iconName:"Next"}),onClick:()=>{},initialsColor:t.nextAppointment?void 0:p.a.transparent})),className:"hidden-xs"},{dataValue:t.totalPayments,component:v.createElement("div",null,v.createElement(a.l,{text:c.db.getSetting("currencySymbol")+t.totalPayments.toString(),subText:Object(s.B)("Payments made"),size:3,onRenderInitials:()=>v.createElement(h.a,{iconName:"CheckMark"}),onClick:()=>{},initialsColor:t.totalPayments>0?p.a.darkBlue:p.a.transparent}),v.createElement("br",null),v.createElement(a.l,{text:c.db.getSetting("currencySymbol")+(t.differenceAmount<0?t.outstandingAmount.toString():t.differenceAmount>0?t.overpaidAmount.toString():"0"),subText:t.differenceAmount<0?Object(s.B)("Outstanding amount"):t.differenceAmount>0?Object(s.B)("Overpaid amount"):Object(s.B)("No outstanding amount"),size:3,onRenderInitials:()=>v.createElement(h.a,{iconName:"Cancel"}),onClick:()=>{},initialsColor:0!==t.differenceAmount?p.a.darkRed:p.a.transparent})),className:"hidden-xs"}]}}),commands:this.canEdit?[{key:"addNew",title:"Add new",name:Object(s.B)("Add new"),onClick:()=>this.showAdditionPanel=!0,iconProps:{iconName:"Add"}}]:[]}),v.createElement(u.a,{isOpen:this.showAdditionPanel,type:b.a.smallFixedFar,closeButtonAriaLabel:"Close",isLightDismiss:!0,onDismiss:()=>{this.showAdditionPanel=!1}},v.createElement("h4",null,Object(s.B)("Choose patient")),v.createElement("br",null),v.createElement(a.p,{strict:!0,value:[],options:c.N.patientsWithNoOrtho.map(e=>({key:e._id,text:e.name})),onAdd:e=>{this.showAdditionPanel=!1;const t=new c.l;t.patientID=e.key,c.N.list.push(t),this.selectedId=t._id,this.viewWhich=3},placeholder:Object(s.B)("Type to select patient")}),v.createElement("br",null),v.createElement("hr",null),v.createElement("h4",null,"Or add new patient"),v.createElement("br",null),v.createElement(E.a,{placeholder:Object(s.B)("Patient name"),value:this.newPatientName,onChange:(e,t)=>this.newPatientName=t}),v.createElement(O.a,{onClick:()=>{const e=new c.m;e.name=this.newPatientName;const t=new c.l;t.patientID=e._id,c.P.list.push(e),c.N.list.push(t),this.newPatientName="",this.selectedId=t._id,this.viewWhich=3},iconProps:{iconName:"add"},text:Object(s.B)("Add new")})),v.createElement(u.a,{isOpen:!!(this.selectedCase&&this.selectedPatient&&this.viewWhich),type:b.a.medium,closeButtonAriaLabel:"Close",isLightDismiss:!0,onDismiss:()=>{this.selectedId="",this.viewWhich=0},onRenderNavigation:()=>this.selectedCase&&this.selectedPatient?v.createElement(a.m,{className:"panel-heading"},v.createElement(a.c,{span:22},v.createElement(a.k,{name:this.selectedPatient.name,secondaryElement:v.createElement("span",null,1===this.viewWhich?Object(s.B)("Patient Details"):"",2===this.viewWhich?Object(s.B)("Dental History"):"",3===this.viewWhich?Object(s.B)("Orthodontic Case Sheet"):"",4===this.viewWhich?Object(s.B)("Orthodontic Album"):"",5===this.viewWhich?Object(s.B)("Gallery and X-Rays"):"",6===this.viewWhich?Object(s.B)("Patient Appointments"):""),size:3})),v.createElement(a.c,{span:2,className:"close"},v.createElement(m.a,{iconProps:{iconName:"cancel"},onClick:()=>{this.selectedId="",this.viewWhich=0}}))):v.createElement("div",null)},v.createElement("div",null,this.selectedCase&&this.selectedPatient?v.createElement("div",{className:"ortho-single-component"},1===this.viewWhich?v.createElement(c.o,{patient:this.selectedPatient}):"",2===this.viewWhich?v.createElement(c.e,{patient:this.selectedPatient}):"",3===this.viewWhich?v.createElement(a.a,{key:"ortho-case-sheet",loader:()=>i.b(this,void 0,void 0,function*(){const e=(yield n.e(7).then(n.bind(null,304))).OrthoCaseSheetPanel;return this.selectedCase?v.createElement(e,{orthoCase:this.selectedCase}):v.createElement("div",null)})}):"",4===this.viewWhich?v.createElement(a.a,{key:"ortho-records",loader:()=>i.b(this,void 0,void 0,function*(){const e=(yield n.e(11).then(n.bind(null,305))).OrthoRecordsPanel;return this.selectedCase?v.createElement(e,{orthoCase:this.selectedCase}):v.createElement("div",null)})}):"",5===this.viewWhich?v.createElement(a.a,{key:"ortho-gallery",loader:()=>i.b(this,void 0,void 0,function*(){const e=(yield n.e(9).then(n.bind(null,306))).OrthoGalleryPanel;return this.selectedCase?v.createElement(e,{orthoCase:this.selectedCase}):v.createElement("div",null)})}):"",6===this.viewWhich?v.createElement(c.n,{patient:this.selectedPatient}):""):"")))}};i.c([o.k],C.prototype,"showAdditionPanel",void 0),i.c([o.k],C.prototype,"newPatientName",void 0),i.c([o.k],C.prototype,"selectedId",void 0),i.c([o.k],C.prototype,"viewWhich",void 0),i.c([o.d],C.prototype,"selectedCase",null),i.c([o.d],C.prototype,"selectedPatient",null),i.c([o.d],C.prototype,"canEdit",null),C=i.c([r.a],C)}}]);