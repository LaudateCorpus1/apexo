(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{350:function(e,t,n){"use strict";n.r(t),n.d(t,"Treatments",function(){return g});var a=n(0),s=n(15),l=n(3),c=n(10),r=n(5),i=n(2),d=n(7),m=n(170),o=n(22),b=n(161),p=n(165),u=n(13),E=n(155),T=n(1);let g=class extends T.Component{get canEdit(){return l.u.currentUser.canEditTreatments}get selectedTreatment(){return c.rb.docs.find(e=>e._id===l.r.selectedID)}render(){return T.createElement("div",{className:"tc-pg"},T.createElement(s.f,{onDelete:this.canEdit?e=>{c.rb.deleteModal(e)}:void 0,commands:this.canEdit?[{key:"addNew",title:"Add new",name:Object(l.t)("Add new"),onClick:()=>{const e=c.rb.new();c.rb.add(e),l.r.selectID(e._id,"details")},iconProps:{iconName:"Add"}}]:[],heads:[Object(l.t)("Treatment"),Object(l.t)("Expenses/unit"),Object(l.t)("Done appointments"),Object(l.t)("Upcoming appointments")],rows:c.rb.docs.map(e=>{const t=(new Date).getTime();let n=0,a=0;const r=c.E.docs;for(let s=0;s<r.length;s++){const l=r[s];l.treatmentID===e._id&&(l.date>t&&a++,l.isDone&&n++)}return{id:e._id,searchableString:e.searchableString,cells:[{dataValue:e.type,component:T.createElement(s.o,{text:e.type,subText:`${Object(l.t)("Expenses")}: ${c.lb.getSetting("currencySymbol")}${e.expenses} ${Object(l.t)("per unit")}`}),onClick:()=>{l.r.selectID(e._id,"details")},className:"no-label"},{dataValue:e.expenses,component:T.createElement("span",null,c.lb.getSetting("currencySymbol"),e.expenses),className:"hidden-xs"},{dataValue:n,component:T.createElement("span",null,n," ",Object(l.t)("done")),className:"hidden-xs"},{dataValue:a,component:T.createElement("span",null,a," ",Object(l.t)("upcoming")),className:"hidden-xs"}]}}),maxItemsOnLoad:20}),this.selectedTreatment?T.createElement(m.a,{isOpen:!!this.selectedTreatment,type:o.a.medium,closeButtonAriaLabel:"Close",isLightDismiss:!0,onDismiss:()=>{l.r.unSelect()},onRenderNavigation:()=>T.createElement("div",{className:"panel-heading"},T.createElement(s.k,{title:this.selectedTreatment.type,type:"Treatment",subTitle:`${Object(l.t)("Expenses")}: ${c.lb.getSetting("currencySymbol")}${this.selectedTreatment.expenses} ${Object(l.t)("per unit")}`,onDismiss:()=>l.r.unSelect()}),T.createElement(s.j,{currentSelectedKey:l.r.selectedTab,onSelect:e=>l.r.selectTab(e),items:[{key:"details",icon:"cricket",title:"Treatment Details"},{key:"delete",icon:"trash",title:"Delete"}]}))},T.createElement("div",{className:"treatment-editor"},"details"===l.r.selectedTab?T.createElement(s.q,{title:Object(l.t)("Treatment Details")},T.createElement("div",{className:"treatment-input"},T.createElement(b.a,{label:Object(l.t)("Treatment title"),value:this.selectedTreatment.type,onChange:(e,t)=>this.selectedTreatment.type=t,disabled:!this.canEdit,"data-testid":"treatment-title"}),T.createElement(b.a,{label:Object(l.t)("Treatment expenses (per unit)"),type:"number",value:this.selectedTreatment.expenses.toString(),onChange:(e,t)=>this.selectedTreatment.expenses=Object(r.t)(t),prefix:c.lb.getSetting("currencySymbol"),disabled:!this.canEdit}))):"","delete"===l.r.selectedTab?T.createElement("div",null,T.createElement("br",null),T.createElement(p.a,{messageBarType:u.a.warning},Object(l.t)("Are you sure you want to delete")),T.createElement("br",null),T.createElement(E.a,{className:"delete",iconProps:{iconName:"delete"},text:Object(l.t)("Delete"),onClick:()=>{c.rb.delete(l.r.selectedID),l.r.unSelect()}})):"")):"")}};Object(a.c)([i.d],g.prototype,"canEdit",null),Object(a.c)([i.d],g.prototype,"selectedTreatment",null),g=Object(a.c)([d.a],g)}}]);