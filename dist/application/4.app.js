(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{169:function(e,t,n){"use strict";n.r(t),n.d(t,"OrthoPage",function(){return C});var i=n(1),a=n(5),s=n(2),c=n(4),l=n(6),o=n(3),r=n(8),d=n(16),m=n(13),h=n(21),p=n(9),u=n(46),b=n(20),E=n(18),w=n(52),O=n(0);let C=class extends O.Component{constructor(){super(...arguments),this.showAdditionPanel=!1,this.newPatientName="",this.selectedId="",this.viewWhich=0}get selectedCase(){return c.U.list.find(e=>e._id===this.selectedId)}get selectedPatient(){if(this.selectedCase&&this.selectedCase.patient)return this.selectedCase.patient}get canEdit(){return s.C.currentUser.canEditOrtho}render(){return O.createElement("div",{className:"orthodontic-cases-component p-15 p-l-10 p-r-10"},O.createElement(a.e,{maxItemsOnLoad:10,className:"orthodontic-cases-data-table",heads:[Object(s.B)("Orthodontic Patient"),Object(s.B)("Started/Finished Treatment"),Object(s.B)("Last/Next Appointment"),Object(s.B)("Total/Outstanding Payments")],rows:c.U.filtered.filter(e=>e.patient).map(e=>{const t=e.patient||new c.r;return{id:e._id,searchableString:e.searchableString,cells:[{dataValue:t.name,component:O.createElement("div",null,O.createElement(a.k,{name:t.name,secondaryElement:O.createElement("span",null,Object(s.B)(Object(c.Q)(t.gender))," ","- ",t.age," ",Object(s.B)("years old")),size:3}),O.createElement("br",null),O.createElement(d.a,{content:Object(s.B)("Patient Details")},O.createElement(m.a,{className:"action-button",iconProps:{iconName:"DietPlanNotebook"},onClick:()=>{this.selectedId=e._id,this.viewWhich=1}})),O.createElement(d.a,{content:Object(s.B)("Dental History")},O.createElement(m.a,{className:"action-button",iconProps:{iconName:"Teeth"},onClick:()=>{this.selectedId=e._id,this.viewWhich=2}})),O.createElement(d.a,{content:Object(s.B)("Orthodontic Case Sheet")},O.createElement(m.a,{className:"action-button",iconProps:{iconName:"GroupedList"},onClick:()=>{this.selectedId=e._id,this.viewWhich=3}})),O.createElement(d.a,{content:Object(s.B)("Orthodontic Album")},O.createElement(m.a,{className:"action-button",iconProps:{iconName:"TripleColumn"},onClick:()=>{this.selectedId=e._id,this.viewWhich=4}})),O.createElement(d.a,{content:Object(s.B)("Gallery and X-Rays")},O.createElement(m.a,{className:"action-button",iconProps:{iconName:"PhotoCollection"},onClick:()=>{this.selectedId=e._id,this.viewWhich=5}})),s.C.currentUser.canViewAppointments?O.createElement(d.a,{content:Object(s.B)("Patient Appointments")},O.createElement(m.a,{className:"action-button",iconProps:{iconName:"Calendar"},onClick:()=>{this.selectedId=e._id,this.viewWhich=6}})):"",O.createElement(d.a,{content:Object(s.B)("Delete")},O.createElement(m.a,{className:"action-button delete",iconProps:{iconName:"Trash"},onClick:()=>c.U.deleteModal(e._id),disabled:!this.canEdit}))),className:"no-label"},{dataValue:e.isFinished?1/0:e.startedDate,component:O.createElement("div",null,O.createElement(a.l,{text:e.isStarted?Object(l.j)(e.startedDate,c.kb.getSetting("date_format")):"",subText:e.isStarted?Object(s.B)("Started treatment"):Object(s.B)("Has not started yet"),size:3,onRenderInitials:()=>O.createElement(h.a,{iconName:"info"}),onClick:()=>{},initialsColor:e.isStarted?p.a.teal:p.a.transparent}),O.createElement("br",null),O.createElement(a.l,{text:e.isFinished?Object(l.j)(e.finishedDate,c.kb.getSetting("date_format")):"",subText:e.isFinished?Object(s.B)("Finished treatment"):Object(s.B)("Has not finished yet"),size:3,onRenderInitials:()=>O.createElement(h.a,{iconName:"CheckMark"}),onClick:()=>{},initialsColor:e.isFinished?p.a.blue:p.a.transparent})),className:"hidden-xs"},{dataValue:(t.nextAppointment||{date:0}).date,component:O.createElement("div",null,O.createElement(a.l,{text:t.lastAppointment&&t.lastAppointment.treatment?t.lastAppointment.treatment.type:"",subText:t.lastAppointment?Object(l.j)(t.lastAppointment.date,c.kb.getSetting("date_format")):Object(s.B)("No last appointment"),size:3,onRenderInitials:()=>O.createElement(h.a,{iconName:"Previous"}),onClick:()=>{},initialsColor:t.lastAppointment?void 0:p.a.transparent}),O.createElement("br",null),O.createElement(a.l,{text:t.nextAppointment&&t.nextAppointment.treatment?t.nextAppointment.treatment.type:"",subText:t.nextAppointment?Object(l.j)(t.nextAppointment.date,c.kb.getSetting("date_format")):Object(s.B)("No next appointment"),size:3,onRenderInitials:()=>O.createElement(h.a,{iconName:"Next"}),onClick:()=>{},initialsColor:t.nextAppointment?void 0:p.a.transparent})),className:"hidden-xs"},{dataValue:t.totalPayments,component:O.createElement("div",null,O.createElement(a.l,{text:c.kb.getSetting("currencySymbol")+t.totalPayments.toString(),subText:Object(s.B)("Payments made"),size:3,onRenderInitials:()=>O.createElement(h.a,{iconName:"CheckMark"}),onClick:()=>{},initialsColor:t.totalPayments>0?p.a.darkBlue:p.a.transparent}),O.createElement("br",null),O.createElement(a.l,{text:c.kb.getSetting("currencySymbol")+(t.differenceAmount<0?t.outstandingAmount.toString():t.differenceAmount>0?t.overpaidAmount.toString():"0"),subText:t.differenceAmount<0?Object(s.B)("Outstanding amount"):t.differenceAmount>0?Object(s.B)("Overpaid amount"):Object(s.B)("No outstanding amount"),size:3,onRenderInitials:()=>O.createElement(h.a,{iconName:"Cancel"}),onClick:()=>{},initialsColor:0!==t.differenceAmount?p.a.darkRed:p.a.transparent})),className:"hidden-xs"}]}}),commands:this.canEdit?[{key:"addNew",title:"Add new",name:Object(s.B)("Add new"),onClick:()=>this.showAdditionPanel=!0,iconProps:{iconName:"Add"}}]:[]}),O.createElement(u.a,{isOpen:this.showAdditionPanel,type:b.a.smallFixedFar,closeButtonAriaLabel:"Close",isLightDismiss:!0,onDismiss:()=>{this.showAdditionPanel=!1}},O.createElement("h4",null,Object(s.B)("Choose patient")),O.createElement("br",null),O.createElement(a.p,{strict:!0,value:[],options:c.U.patientsWithNoOrtho.map(e=>({key:e._id,text:e.name})),onAdd:e=>{this.showAdditionPanel=!1;const t=new c.n;t.patientID=e.key,c.U.list.push(t),this.selectedId=t._id,this.viewWhich=3},placeholder:Object(s.B)("Type to select patient")}),O.createElement("br",null),O.createElement("hr",null),O.createElement("h4",null,"Or add new patient"),O.createElement("br",null),O.createElement(E.a,{placeholder:Object(s.B)("Patient name"),value:this.newPatientName,onChange:(e,t)=>this.newPatientName=t}),O.createElement(w.a,{onClick:()=>{const e=new c.r;e.name=this.newPatientName;const t=new c.n;t.patientID=e._id,c.W.list.push(e),c.U.list.push(t),this.newPatientName="",this.selectedId=t._id,this.viewWhich=3},iconProps:{iconName:"add"},text:Object(s.B)("Add new")})),O.createElement(u.a,{isOpen:!!(this.selectedCase&&this.selectedPatient&&this.viewWhich),type:b.a.medium,closeButtonAriaLabel:"Close",isLightDismiss:!0,onDismiss:()=>{this.selectedId="",this.viewWhich=0},onRenderNavigation:()=>this.selectedCase&&this.selectedPatient?O.createElement(a.m,{className:"panel-heading"},O.createElement(a.c,{span:22},O.createElement(a.k,{name:this.selectedPatient.name,secondaryElement:O.createElement("span",null,1===this.viewWhich?Object(s.B)("Patient Details"):"",2===this.viewWhich?Object(s.B)("Dental History"):"",3===this.viewWhich?Object(s.B)("Orthodontic Case Sheet"):"",4===this.viewWhich?Object(s.B)("Orthodontic Album"):"",5===this.viewWhich?Object(s.B)("Gallery and X-Rays"):"",6===this.viewWhich?Object(s.B)("Patient Appointments"):""),size:3})),O.createElement(a.c,{span:2,className:"close"},O.createElement(m.a,{iconProps:{iconName:"cancel"},onClick:()=>{this.selectedId="",this.viewWhich=0}}))):O.createElement("div",null)},O.createElement("div",null,this.selectedCase&&this.selectedPatient?O.createElement("div",{className:"ortho-single-component"},1===this.viewWhich?O.createElement(c.t,{patient:this.selectedPatient}):"",2===this.viewWhich?O.createElement(c.g,{patient:this.selectedPatient}):"",3===this.viewWhich?O.createElement(c.o,{orthoCase:this.selectedCase}):"",4===this.viewWhich?O.createElement(c.q,{orthoCase:this.selectedCase}):"",5===this.viewWhich?O.createElement(c.p,{orthoCase:this.selectedCase}):"",6===this.viewWhich?O.createElement(c.s,{patient:this.selectedPatient}):""):"")))}};i.c([o.k],C.prototype,"showAdditionPanel",void 0),i.c([o.k],C.prototype,"newPatientName",void 0),i.c([o.k],C.prototype,"selectedId",void 0),i.c([o.k],C.prototype,"viewWhich",void 0),i.c([o.d],C.prototype,"selectedCase",null),i.c([o.d],C.prototype,"selectedPatient",null),i.c([o.d],C.prototype,"canEdit",null),C=i.c([r.a],C)}}]);