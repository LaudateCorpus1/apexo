(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{323:function(e,t,n){"use strict";n.r(t),n.d(t,"Treatments",function(){return h});var s=n(0),a=n(8),c=n(3),l=n(13),i=n(4),r=n(2),d=n(7),m=n(147),o=n(19),p=n(148),b=n(144),u=n(1);let h=class extends u.Component{constructor(){super(...arguments),this.selectedID=c.x.currentLocation.split("/")[1]}get canEdit(){return c.B.currentUser.canEditTreatments}get selectedIndex(){return l.jb.list.findIndex(e=>e._id===this.selectedID)}get selectedTreatment(){return l.jb.list[this.selectedIndex]}render(){return u.createElement("div",{className:"tc-pg p-15 p-l-10 p-r-10"},u.createElement(a.d,{onDelete:this.canEdit?e=>{l.jb.deleteModal(e)}:void 0,commands:this.canEdit?[{key:"addNew",title:"Add new",name:Object(c.A)("Add new"),onClick:()=>{const e=new l.w;l.jb.list.push(e),this.selectedID=e._id},iconProps:{iconName:"Add"}}]:[],heads:[Object(c.A)("Treatment"),Object(c.A)("Expenses/unit"),Object(c.A)("Done appointments"),Object(c.A)("Upcoming appointments")],rows:l.jb.list.map(e=>{const t=(new Date).getTime();let n=0,s=0;const i=l.z.list;for(let a=0;a<i.length;a++){const c=i[a];c.treatmentID===e._id&&(c.date>t&&s++,c.isDone&&n++)}return{id:e._id,searchableString:e.searchableString,cells:[{dataValue:e.type,component:u.createElement(a.j,{text:e.type,subText:`${Object(c.A)("Expenses")}: ${l.bb.getSetting("currencySymbol")}${e.expenses} ${Object(c.A)("per unit")}`}),onClick:()=>{this.selectedID=e._id},className:"no-label"},{dataValue:e.expenses,component:u.createElement("span",null,l.bb.getSetting("currencySymbol"),e.expenses),className:"hidden-xs"},{dataValue:n,component:u.createElement("span",null,n," ",Object(c.A)("done")),className:"hidden-xs"},{dataValue:s,component:u.createElement("span",null,s," ",Object(c.A)("upcoming")),className:"hidden-xs"}]}}),maxItemsOnLoad:20}),this.selectedTreatment?u.createElement(m.a,{isOpen:!!this.selectedTreatment,type:o.a.medium,closeButtonAriaLabel:"Close",isLightDismiss:!0,onDismiss:()=>{this.selectedID=""},onRenderNavigation:()=>u.createElement(a.k,{className:"panel-heading"},u.createElement(a.c,{span:20},this.selectedTreatment?u.createElement(a.j,{text:this.selectedTreatment.type,subText:`${Object(c.A)("Expenses")}: ${l.bb.getSetting("currencySymbol")}${this.selectedTreatment.expenses} ${Object(c.A)("per unit")}`}):u.createElement("p",null)),u.createElement(a.c,{span:4,className:"close"},u.createElement(p.a,{iconProps:{iconName:"cancel"},onClick:()=>{this.selectedID=""}})))},u.createElement("div",{className:"treatment-editor"},u.createElement(a.l,{title:Object(c.A)("Treatment Details")},u.createElement("div",{className:"treatment-input"},u.createElement(b.a,{label:Object(c.A)("Treatment title"),value:this.selectedTreatment.type,onChange:(e,t)=>l.jb.list[this.selectedIndex].type=t,disabled:!this.canEdit}),u.createElement(b.a,{label:Object(c.A)("Treatment expenses (per unit)"),type:"number",value:this.selectedTreatment.expenses.toString(),onChange:(e,t)=>l.jb.list[this.selectedIndex].expenses=Object(i.r)(t),prefix:l.bb.getSetting("currencySymbol"),disabled:!this.canEdit}))))):"")}};s.c([r.k],h.prototype,"selectedID",void 0),s.c([r.d],h.prototype,"canEdit",null),s.c([r.d],h.prototype,"selectedIndex",null),s.c([r.d],h.prototype,"selectedTreatment",null),h=s.c([d.a],h)}}]);