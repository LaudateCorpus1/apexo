(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[2],{

/***/ "./src/modules/appointments/components/appointment-editor.tsx":
/*!********************************************************************!*\
  !*** ./src/modules/appointments/components/appointment-editor.tsx ***!
  \********************************************************************/
/*! exports provided: AppointmentEditorPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AppointmentEditorPanel\", function() { return AppointmentEditorPanel; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @core */ \"./src/core/index.ts\");\n/* harmony import */ var _modules__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @modules */ \"./src/modules/index.ts\");\n/* harmony import */ var mobx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! mobx */ \"./node_modules/mobx/lib/mobx.module.js\");\n/* harmony import */ var mobx_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! mobx-react */ \"./node_modules/mobx-react/dist/mobxreact.esm.js\");\n/* harmony import */ var office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! office-ui-fabric-react */ \"./node_modules/office-ui-fabric-react/lib/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _common_components__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @common-components */ \"./src/common-components/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @utils */ \"./src/utils/index.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\nlet AppointmentEditorPanel = class AppointmentEditorPanel extends react__WEBPACK_IMPORTED_MODULE_6__[\"Component\"] {\n    constructor() {\n        super(...arguments);\n        this.timerInputs = [0, 0, 0];\n        this.timeComb = {\n            hours: this.calcTime.hours,\n            minutes: this.calcTime.minutes,\n            am: this.calcTime.am,\n        };\n        this.tabs = [\n            {\n                key: \"details\",\n                title: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"details\").h,\n                icon: \"DietPlanNotebook\",\n            },\n            {\n                key: \"treatment\",\n                title: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"treatment\").h,\n                icon: \"Cricket\",\n            },\n            {\n                key: \"finance\",\n                title: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"expenses & price\").h,\n                icon: \"AllCurrency\",\n            },\n            {\n                key: \"delete\",\n                title: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"delete\").h,\n                icon: \"trash\",\n                hidden: !this.canEdit,\n            },\n        ];\n    }\n    get calcTime() {\n        if (!this.props.appointment) {\n            return {\n                hours: 12,\n                minutes: \"00\",\n                am: false,\n            };\n        }\n        const timeString = new Date(this.props.appointment.date).toLocaleTimeString(\"en-US\");\n        const obj = {\n            hours: Number(timeString.split(\":\")[0]),\n            minutes: Number(timeString.split(\":\")[1]) < 30 ? \"00\" : \"30\",\n            am: timeString.replace(/[^A-Z]/gi, \"\").toLowerCase() === \"am\",\n        };\n        return obj;\n    }\n    get otherAppointmentsNumber() {\n        const appointment = this.props.appointment;\n        if (!appointment) {\n            return [].length - 1;\n        }\n        return _modules__WEBPACK_IMPORTED_MODULE_2__[\"appointments\"].appointmentsForDay(appointment.date, 0, 0)\n            .filter((a) => a._id !== appointment._id).length;\n    }\n    get treatmentOptions() {\n        const list = JSON.parse(JSON.stringify(_modules__WEBPACK_IMPORTED_MODULE_2__[\"treatments\"].docs));\n        if (this.props.appointment &&\n            this.props.appointment.treatmentID.indexOf(\"|\") > -1) {\n            const arr = this.props.appointment.treatmentID.split(\"|\");\n            const _id = this.props.appointment.treatmentID;\n            const type = arr[0];\n            const expenses = Object(_utils__WEBPACK_IMPORTED_MODULE_8__[\"num\"])(arr[1]);\n            list.push(_modules__WEBPACK_IMPORTED_MODULE_2__[\"treatments\"].new({ _id, type, expenses }));\n        }\n        return list;\n    }\n    get canEdit() {\n        return _core__WEBPACK_IMPORTED_MODULE_1__[\"user\"].currentUser.canEditAppointments;\n    }\n    get staffErrorMessage() {\n        if (!this.props.appointment) {\n            return undefined;\n        }\n        if (this.props.appointment.isDone) {\n            return undefined;\n        }\n        if (this.props.appointment.isMissed) {\n            return undefined;\n        }\n        const target = new Date(this.props.appointment.date)\n            .toDateString()\n            .split(\" \")[0]\n            .toLowerCase();\n        const hasErrors = this.props.appointment.operatingStaff.filter((staff) => !staff.onDutyDays\n            .map((x) => x.toLowerCase())\n            .find((x) => x.startsWith(target)));\n        if (hasErrors.length === 0) {\n            return undefined;\n        }\n        return hasErrors\n            .map((x) => `${x.name} ${Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"might not be available on this day\")}`)\n            .join(\", \");\n    }\n    setTimeFromCombination() {\n        if (!this.props.appointment) {\n            return;\n        }\n        if (this.timeComb.hours === 12) {\n            this.timeComb.am = true;\n        }\n        const d = new Date(this.props.appointment.date);\n        d.setHours(this.timeComb.am ? this.timeComb.hours : this.timeComb.hours + 12, Number(this.timeComb.minutes), 0, 0);\n        this.props.appointment.setDate(d.getTime());\n        this.forceUpdate();\n    }\n    render() {\n        return this.props.appointment && _core__WEBPACK_IMPORTED_MODULE_1__[\"router\"].selectedSub ? (react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__[\"Panel\"], { isOpen: !!this.props.appointment, type: office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__[\"PanelType\"].medium, closeButtonAriaLabel: \"Close\", isLightDismiss: true, onDismiss: () => {\n                if (this.props.onDismiss) {\n                    this.props.onDismiss();\n                }\n                _core__WEBPACK_IMPORTED_MODULE_1__[\"router\"].unSelectSub();\n            }, onRenderNavigation: () => (react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"div\", { className: \"panel-heading\" },\n                react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"PanelTop\"], { title: (this.props.appointment.treatment || {\n                        type: \"\",\n                    }).type, square: true, type: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"appointment\").c, subTitle: this.props.appointment.patient.name, onDismiss: this.props.onDismiss, avatar: this.props.appointment.patient.avatar\n                        ? _core__WEBPACK_IMPORTED_MODULE_1__[\"imagesTable\"].table[this.props.appointment.patient\n                            .avatar]\n                            ? _core__WEBPACK_IMPORTED_MODULE_1__[\"imagesTable\"].table[this.props.appointment.patient\n                                .avatar]\n                            : _core__WEBPACK_IMPORTED_MODULE_1__[\"imagesTable\"].fetchImage(this.props.appointment.patient\n                                .avatar)\n                        : undefined }),\n                react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"PanelTabs\"], { items: this.tabs, onSelect: (key) => _core__WEBPACK_IMPORTED_MODULE_1__[\"router\"].select({ sub: key }), currentSelectedKey: _core__WEBPACK_IMPORTED_MODULE_1__[\"router\"].selectedSub }))) },\n            react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"div\", { className: \"appointment-editor\" },\n                _core__WEBPACK_IMPORTED_MODULE_1__[\"router\"].selectedSub === \"details\" ? (react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"SectionComponent\"], { title: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"appointment\").h },\n                    react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"Row\"], { gutter: 8 },\n                        react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"Col\"], { sm: 12 },\n                            react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"div\", { className: \"appointment-input date\" },\n                                react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__[\"DatePicker\"], { firstDayOfWeek: Object(_utils__WEBPACK_IMPORTED_MODULE_8__[\"firstDayOfTheWeekDayPicker\"])(_modules__WEBPACK_IMPORTED_MODULE_2__[\"setting\"].getSetting(\"weekend_num\")), label: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"date\").c, disabled: !this.canEdit, className: \"appointment-date\", placeholder: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"select a date\").c, value: new Date(this.props.appointment.date), onSelectDate: (date) => {\n                                        if (date) {\n                                            this.props.appointment.setDate(date.getTime());\n                                        }\n                                    }, formatDate: (d) => Object(_utils__WEBPACK_IMPORTED_MODULE_8__[\"formatDate\"])(d || 0, _modules__WEBPACK_IMPORTED_MODULE_2__[\"setting\"].getSetting(\"date_format\")) }),\n                                react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"p\", { className: \"insight\" },\n                                    Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"with\").c,\n                                    \" \",\n                                    react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"span\", { className: \"num-\" +\n                                            this.otherAppointmentsNumber }, this.otherAppointmentsNumber),\n                                    \" \",\n                                    Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"other appointment\")))),\n                        react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"Col\"], { sm: 12 },\n                            react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"div\", { className: \"appointment-input time\" },\n                                react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"Row\"], { gutter: 8 },\n                                    react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__[\"Label\"], null, Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"time\").c),\n                                    react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"Row\"], { gutter: 0 },\n                                        react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"Col\"], { span: 8 },\n                                            react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__[\"Dropdown\"], { className: \"ae-hr\", options: [\n                                                    12,\n                                                    1,\n                                                    2,\n                                                    3,\n                                                    4,\n                                                    5,\n                                                    6,\n                                                    7,\n                                                    8,\n                                                    9,\n                                                    10,\n                                                    11,\n                                                ].map((x) => ({\n                                                    key: x.toString(),\n                                                    text: x < 10\n                                                        ? `0${x.toString()}`\n                                                        : x.toString(),\n                                                })), selectedKey: this.calcTime.hours.toString(), onChange: (ev, val) => {\n                                                    if (val) {\n                                                        this.timeComb.hours = Number(val.key.toString());\n                                                        this.setTimeFromCombination();\n                                                    }\n                                                } })),\n                                        react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"Col\"], { span: 8 },\n                                            react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__[\"Dropdown\"], { className: \"ae-mn\", options: [\n                                                    \"00\",\n                                                    \"30\",\n                                                ].map((x) => ({\n                                                    key: x,\n                                                    text: x,\n                                                })), selectedKey: this.calcTime\n                                                    .minutes, onChange: (ev, val) => {\n                                                    if (val) {\n                                                        this.timeComb.minutes = val.key.toString();\n                                                        this.setTimeFromCombination();\n                                                    }\n                                                } })),\n                                        react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"Col\"], { span: 8 },\n                                            react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__[\"Dropdown\"], { className: \"ae-am\", options: [\n                                                    {\n                                                        text: \"am\",\n                                                        key: \"am\",\n                                                    },\n                                                    {\n                                                        text: \"pm\",\n                                                        key: \"pm\",\n                                                    },\n                                                ], selectedKey: this.calcTime.am\n                                                    ? \"am\"\n                                                    : \"pm\", onChange: (ev, val) => {\n                                                    if (val) {\n                                                        this.timeComb.am =\n                                                            val.key.toString() ===\n                                                                \"am\";\n                                                        this.setTimeFromCombination();\n                                                    }\n                                                } })))),\n                                react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__[\"Toggle\"], { checked: this.props.appointment.isDone, onText: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"done\").c, offText: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"not done\").c, disabled: !this.canEdit ||\n                                        (!this.props.appointment\n                                            .isDone &&\n                                            new Date(this.props.appointment.date).setHours(0, 0, 0, 0) >\n                                                new Date().setHours(0, 0, 0, 0)), onChange: (e, newVal) => {\n                                        this.props.appointment.isDone = newVal;\n                                    }, \"data-testid\": \"is-done\" })))),\n                    react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"div\", { className: \"appointment-input\" },\n                        react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"TagInputComponent\"], { label: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"operating staff\").c, options: _modules__WEBPACK_IMPORTED_MODULE_2__[\"staff\"].operatingStaff.sort((a, b) => a.name.localeCompare(b.name))\n                                .map((s) => {\n                                return {\n                                    key: s._id,\n                                    text: s.name,\n                                };\n                            }), value: this.props.appointment.operatingStaff.map((x) => ({ key: x._id, text: x.name })), onChange: (newKeys) => {\n                                this.props.appointment.staffID = newKeys;\n                            }, disabled: !this.canEdit, suggestionsHeaderText: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"operating staff\").c, noResultsFoundText: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"no staff found\").r, className: \"operating-staff\", errorMessage: this.staffErrorMessage })))) : (\"\"),\n                _core__WEBPACK_IMPORTED_MODULE_1__[\"router\"].selectedSub === \"treatment\" ? (react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"SectionComponent\"], { title: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"case details\").h },\n                    react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__[\"TextField\"], { multiline: true, disabled: !this.canEdit, label: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"details\").c, value: this.props.appointment.notes, onChange: (e, value) => {\n                            this.props.appointment.notes = value;\n                        }, \"data-testid\": \"case-details\" }),\n                    react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"br\", null),\n                    react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"Row\"], { gutter: 8 },\n                        react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"Col\"], { sm: 12 },\n                            react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"div\", { className: \"appointment-input treatment\" },\n                                react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__[\"Dropdown\"], { label: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"treatment\").c, disabled: !this.canEdit, className: \"treatment-type\", selectedKey: this.props.appointment\n                                        .treatmentID, options: this.treatmentOptions\n                                        .sort((a, b) => a.type.localeCompare(b.type))\n                                        .map((tr) => {\n                                        return {\n                                            key: tr._id,\n                                            text: tr.type,\n                                        };\n                                    }), onChange: (e, newValue) => {\n                                        this.props.appointment.treatmentID = newValue.key.toString();\n                                    } }))),\n                        react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"Col\"], { sm: 12 },\n                            react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"div\", { className: \"appointment-input units-number\" },\n                                react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__[\"TextField\"], { label: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"units number\").c, disabled: !this.canEdit, type: \"number\", value: this.props.appointment.units.toString(), onChange: (e, newValue) => {\n                                        this.props.appointment.units = Object(_utils__WEBPACK_IMPORTED_MODULE_8__[\"num\"])(newValue);\n                                    }, \"data-testid\": \"units-num\" }))),\n                        react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"Col\"], { span: 24 },\n                            react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"div\", { className: \"appointment-input involved-teeth\" },\n                                react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"TagInputComponent\"], { label: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"involved teeth\").c, options: _modules__WEBPACK_IMPORTED_MODULE_2__[\"ISOTeethArr\"].map((x) => {\n                                        return {\n                                            key: x.toString(),\n                                            text: x.toString(),\n                                        };\n                                    }), suggestionsHeaderText: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"select involved teeth\").c, noResultsFoundText: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"no teeth found\").c, disabled: !this.canEdit, value: this.props\n                                        .appointment.involvedTeeth.sort()\n                                        .map((x) => ({\n                                        key: x.toString(),\n                                        text: x.toString(),\n                                    })), onChange: (selectedKeys) => {\n                                        this.props.appointment.involvedTeeth = selectedKeys.map((x) => Object(_utils__WEBPACK_IMPORTED_MODULE_8__[\"num\"])(x));\n                                    } })))),\n                    _modules__WEBPACK_IMPORTED_MODULE_2__[\"setting\"].getSetting(\"module_prescriptions\") ? (react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"div\", null,\n                        react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"div\", { className: \"appointment-input prescription\" },\n                            react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"TagInputComponent\"], { label: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"prescription\").c, options: _modules__WEBPACK_IMPORTED_MODULE_2__[\"prescriptions\"].docs.map(this.prescriptionToTagInput), suggestionsHeaderText: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"select prescription\").c, noResultsFoundText: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"no prescription found\").c, disabled: !this.canEdit, value: this.props.appointment.prescriptions.map((x) => ({\n                                    key: x.id,\n                                    text: x.prescription,\n                                })), onChange: (selectedKeys) => {\n                                    this.props.appointment.prescriptions = selectedKeys.map((selectedID) => ({\n                                        id: selectedID,\n                                        prescription: this.prescriptionToTagInput(_modules__WEBPACK_IMPORTED_MODULE_2__[\"prescriptions\"].docs.find((p) => p._id ===\n                                            selectedID)).text,\n                                    }));\n                                } })),\n                        react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"div\", { id: \"prescription-items\" },\n                            react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"div\", { className: \"print-heading\" },\n                                react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"h2\", null, this.props.appointment.operatingStaff\n                                    .map((x) => x.name)\n                                    .join(\",\")),\n                                react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"hr\", null),\n                                react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"h3\", null,\n                                    \"Patient:\",\n                                    \" \",\n                                    (this.props.appointment\n                                        .patient || {\n                                        name: \"\",\n                                    }).name),\n                                react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"Row\"], null,\n                                    react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"Col\"], { span: 12 },\n                                        react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"h4\", null,\n                                            \"Age:\",\n                                            \" \",\n                                            (this.props\n                                                .appointment\n                                                .patient || {\n                                                age: 0,\n                                            }).age)),\n                                    react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"Col\"], { span: 12 },\n                                        react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"h4\", null,\n                                            \"Gender:\",\n                                            \" \",\n                                            (this.props\n                                                .appointment\n                                                .patient || {\n                                                gender: \"male\",\n                                            }).gender))),\n                                react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"hr\", null)),\n                            this.props.appointment.prescriptions.map((item) => {\n                                return (react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"Row\"], { key: item.id },\n                                    react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"Col\"], { span: 20, className: \"m-b-5\" },\n                                        react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"ProfileSquaredComponent\"], { text: item.prescription.split(\":\")[0], onRenderInitials: () => (react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__[\"Icon\"], { iconName: \"pill\" })), subText: item.prescription.split(\":\")[1] })),\n                                    react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"Col\"], { span: 4, style: {\n                                            textAlign: \"right\",\n                                        } }, this.canEdit ? (react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__[\"IconButton\"], { iconProps: {\n                                            iconName: \"delete\",\n                                        }, onClick: () => {\n                                            this.props.appointment.prescriptions = this.props.appointment.prescriptions.filter((x) => x.id !==\n                                                item.id);\n                                        } })) : (\"\"))));\n                            })),\n                        this.props.appointment.prescriptions\n                            .length ? (react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__[\"DefaultButton\"], { onClick: () => {\n                                print();\n                            }, iconProps: { iconName: \"print\" }, text: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"print prescription\").c })) : (\"\"))) : (\"\"))) : (\"\"),\n                _core__WEBPACK_IMPORTED_MODULE_1__[\"router\"].selectedSub === \"finance\" ? (react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"SectionComponent\"], { title: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"expenses & price\").h },\n                    _modules__WEBPACK_IMPORTED_MODULE_2__[\"setting\"].getSetting(\"time_tracking\") ? (react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"div\", { className: \"appointment-input time\", style: { maxWidth: 300 } },\n                        react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__[\"Label\"], null, Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"time (hours, minutes, seconds)\").c),\n                        react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__[\"TextField\"], { className: \"time-input hours\", type: \"number\", disabled: !this.canEdit, value: this.formatMillisecondsToTime(this.props.appointment.time).hours, onChange: (e, v) => {\n                                this.timerInputs[0] = Object(_utils__WEBPACK_IMPORTED_MODULE_8__[\"num\"])(v);\n                                this.manuallyUpdateTime();\n                            } }),\n                        react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__[\"TextField\"], { className: \"time-input minutes\", type: \"number\", disabled: !this.canEdit, value: this.formatMillisecondsToTime(this.props.appointment.time).minutes, onChange: (e, v) => {\n                                this.timerInputs[1] = Object(_utils__WEBPACK_IMPORTED_MODULE_8__[\"num\"])(v);\n                                this.manuallyUpdateTime();\n                            } }),\n                        react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__[\"TextField\"], { className: \"time-input seconds\", type: \"number\", disabled: !this.canEdit, value: this.formatMillisecondsToTime(this.props.appointment.time).seconds, onChange: (e, v) => {\n                                this.timerInputs[2] = Object(_utils__WEBPACK_IMPORTED_MODULE_8__[\"num\"])(v);\n                                this.manuallyUpdateTime();\n                            } }),\n                        this.props.appointment.timer ? (react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__[\"PrimaryButton\"], { iconProps: {\n                                iconName: \"Timer\",\n                            }, disabled: !this.canEdit, className: \"appendage stop\", text: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"stop\").c, onClick: () => {\n                                const timer = this.props\n                                    .appointment.timer;\n                                if (timer) {\n                                    clearInterval(timer);\n                                }\n                                this.props.appointment.timer = null;\n                            } })) : (react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__[\"PrimaryButton\"], { iconProps: {\n                                iconName: \"Timer\",\n                            }, disabled: !this.canEdit, className: \"appendage\", text: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"start\").c, onClick: () => {\n                                this.props.appointment.timer = window.setInterval(() => {\n                                    this.props.appointment.timerAddOneSecond();\n                                }, _utils__WEBPACK_IMPORTED_MODULE_8__[\"second\"]);\n                            } })))) : (\"\"),\n                    react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"div\", { className: \"appointment-input paid\" },\n                        react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"Row\"], { gutter: 8 },\n                            react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"Col\"], { xs: 12 },\n                                react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__[\"TextField\"], { type: \"number\", disabled: !this.canEdit, label: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"price\").c, value: this.props.appointment.finalPrice.toString(), onChange: (e, newVal) => {\n                                        this.props.appointment.finalPrice = Object(_utils__WEBPACK_IMPORTED_MODULE_8__[\"num\"])(newVal);\n                                    }, prefix: _modules__WEBPACK_IMPORTED_MODULE_2__[\"setting\"].getSetting(\"currencySymbol\"), \"data-testid\": \"price\" })),\n                            react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"Col\"], { xs: 12 },\n                                react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__[\"TextField\"], { type: \"number\", disabled: !this.canEdit, label: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"paid\").c, value: this.props.appointment.paidAmount.toString(), onChange: (e, newVal) => {\n                                        this.props.appointment.paidAmount = Object(_utils__WEBPACK_IMPORTED_MODULE_8__[\"num\"])(newVal);\n                                    }, prefix: _modules__WEBPACK_IMPORTED_MODULE_2__[\"setting\"].getSetting(\"currencySymbol\") }))),\n                        react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"Row\"], { gutter: 8 },\n                            react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"Col\"], { xs: 24, sm: 8 },\n                                react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__[\"TextField\"], { type: \"number\", disabled: true, label: _modules__WEBPACK_IMPORTED_MODULE_2__[\"setting\"].getSetting(\"time_tracking\")\n                                        ? Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"expenses\").c +\n                                            \" + \" +\n                                            Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"time value\").r\n                                        : Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"expenses\").c, value: Object(_utils__WEBPACK_IMPORTED_MODULE_8__[\"round\"])(this.props.appointment\n                                        .totalExpenses).toString(), prefix: _modules__WEBPACK_IMPORTED_MODULE_2__[\"setting\"].getSetting(\"currencySymbol\") })),\n                            react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"Col\"], { xs: 12, sm: 8 },\n                                react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__[\"TextField\"], { type: \"number\", disabled: true, label: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"profit\").c, value: Object(_utils__WEBPACK_IMPORTED_MODULE_8__[\"round\"])(this.props.appointment.profit).toString(), prefix: _modules__WEBPACK_IMPORTED_MODULE_2__[\"setting\"].getSetting(\"currencySymbol\"), errorMessage: this.props.appointment.profit <\n                                        0\n                                        ? Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"price is too low\").c\n                                        : undefined })),\n                            react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_7__[\"Col\"], { xs: 12, sm: 8 },\n                                react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__[\"TextField\"], { type: \"number\", disabled: true, label: this.props.appointment\n                                        .outstandingAmount\n                                        ? Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"outstanding\").c\n                                        : this.props.appointment\n                                            .overpaidAmount\n                                            ? Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"overpaid\").c\n                                            : Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"outstanding\").c, value: this.props.appointment\n                                        .outstandingAmount\n                                        ? this.props.appointment.outstandingAmount.toString()\n                                        : this.props.appointment\n                                            .overpaidAmount\n                                            ? this.props.appointment.overpaidAmount.toString()\n                                            : this.props.appointment.outstandingAmount.toString(), prefix: _modules__WEBPACK_IMPORTED_MODULE_2__[\"setting\"].getSetting(\"currencySymbol\"), errorMessage: this.props.appointment\n                                        .outstandingAmount\n                                        ? Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"outstanding amount\")\n                                            .r\n                                        : this.props.appointment\n                                            .overpaidAmount\n                                            ? Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"overpaid amount\").r\n                                            : undefined })))))) : (\"\"),\n                _core__WEBPACK_IMPORTED_MODULE_1__[\"router\"].selectedSub === \"delete\" ? (react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"div\", null,\n                    react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"br\", null),\n                    react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__[\"MessageBar\"], { messageBarType: office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__[\"MessageBarType\"].warning }, Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"are you sure you want to delete this appointment?\")),\n                    react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"br\", null),\n                    react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_5__[\"PrimaryButton\"], { className: \"delete\", iconProps: {\n                            iconName: \"delete\",\n                        }, text: Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"delete\").r, onClick: () => {\n                            _modules__WEBPACK_IMPORTED_MODULE_2__[\"appointments\"].delete(this.props.appointment._id);\n                        } }))) : (\"\"),\n                react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"br\", null),\n                react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"br\", null),\n                react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"br\", null)))) : (react__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"](\"div\", null));\n    }\n    formatMillisecondsToTime(ms) {\n        const msInSecond = 1000;\n        const msInMinute = msInSecond * 60;\n        const msInHour = msInMinute * 60;\n        const hours = Math.floor(ms / msInHour);\n        const minutes = Math.floor((ms % msInHour) / msInMinute);\n        const seconds = Math.floor(((ms % msInHour) % msInMinute) / msInSecond);\n        return {\n            hours: padWithZero(hours),\n            minutes: padWithZero(minutes),\n            seconds: padWithZero(seconds),\n        };\n        function padWithZero(n) {\n            return n > 9 ? n.toString() : \"0\" + n.toString();\n        }\n    }\n    manuallyUpdateTime() {\n        const msInSecond = 1000;\n        const msInMinute = msInSecond * 60;\n        const msInHour = msInMinute * 60;\n        const hours = this.timerInputs[0];\n        const minutes = this.timerInputs[1];\n        const seconds = this.timerInputs[2];\n        if (isNaN(hours) || isNaN(minutes) || isNaN(seconds)) {\n            return;\n        }\n        this.props.appointment.time =\n            hours * msInHour + minutes * msInMinute + seconds * msInSecond;\n    }\n    prescriptionToTagInput(p) {\n        return {\n            key: p._id,\n            text: `${p.name}: ${p.doseInMg}${Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(\"mg\")} ${p.timesPerDay}X${p.unitsPerTime} ${Object(_core__WEBPACK_IMPORTED_MODULE_1__[\"text\"])(p.form)}`,\n        };\n    }\n};\nObject(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"])([\n    mobx__WEBPACK_IMPORTED_MODULE_3__[\"observable\"]\n], AppointmentEditorPanel.prototype, \"timerInputs\", void 0);\nObject(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"])([\n    mobx__WEBPACK_IMPORTED_MODULE_3__[\"observable\"]\n], AppointmentEditorPanel.prototype, \"timeComb\", void 0);\nObject(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"])([\n    mobx__WEBPACK_IMPORTED_MODULE_3__[\"computed\"]\n], AppointmentEditorPanel.prototype, \"calcTime\", null);\nObject(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"])([\n    mobx__WEBPACK_IMPORTED_MODULE_3__[\"computed\"]\n], AppointmentEditorPanel.prototype, \"otherAppointmentsNumber\", null);\nObject(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"])([\n    mobx__WEBPACK_IMPORTED_MODULE_3__[\"computed\"]\n], AppointmentEditorPanel.prototype, \"treatmentOptions\", null);\nObject(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"])([\n    mobx__WEBPACK_IMPORTED_MODULE_3__[\"computed\"]\n], AppointmentEditorPanel.prototype, \"canEdit\", null);\nObject(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"])([\n    mobx__WEBPACK_IMPORTED_MODULE_3__[\"computed\"]\n], AppointmentEditorPanel.prototype, \"staffErrorMessage\", null);\nAppointmentEditorPanel = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"])([\n    mobx_react__WEBPACK_IMPORTED_MODULE_4__[\"observer\"]\n], AppointmentEditorPanel);\n\n\n\n//# sourceURL=webpack:///./src/modules/appointments/components/appointment-editor.tsx?");

/***/ })

}]);