(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{168:function(e,t,a){"use strict";a.r(t),a.d(t,"CalendarPage",function(){return p});var n=a(1),l=a(5),c=a(2),s=a(4),r=a(6),d=a(3),m=a(8),o=a(15),i=a(18),u=a(21),y=a(0);let p=class extends y.Component{constructor(){super(...arguments),this.filter="",this.appointment=null,this.showAll=!0}componentDidMount(){this.unifyHeight();const e=c.y.currentLocation.split("/")[1];if(!e)return;const t=e.split(/\W/);s.L.selectedYear=Object(r.r)(t[0]),s.L.selectedMonth=Object(r.r)(t[1])-1,s.L.selectedDay=Object(r.r)(t[2])}componentDidUpdate(){this.unifyHeight()}unifyHeight(){if(!document.getElementById("full-day-cols"))return;const e=document.getElementsByClassName("full-day-col");let t=0;for(let a=0;a<e.length;a++){const n=e[a].clientHeight;n>t&&(t=n)}for(let a=0;a<e.length;a++)e[a].style.minHeight=t?t+"px":"auto"}render(){return y.createElement("div",{className:"calendar-component container-fluid"},y.createElement("div",{className:"selector year-selector"},y.createElement(l.m,null,[s.L.currentYear-2,s.L.currentYear-1,s.L.currentYear,s.L.currentYear+1].map(e=>y.createElement(l.c,{key:e,span:6,className:"centered"},y.createElement("a",{onClick:()=>{s.L.selectedYear=e,s.L.selectedMonth=0,s.L.selectedDay=1},className:(s.L.selectedYear===e?"selected":"")+(s.L.currentYear===e?" current":"")},e))))),y.createElement("div",{className:"selector month-selector"},y.createElement(l.m,null,r.c.monthsShort().map((e,t)=>y.createElement(l.c,{key:e,sm:2,xs:4,className:"centered"},y.createElement("a",{onClick:()=>{s.L.selectedMonth=t,s.L.selectedDay=1},className:(s.L.selectedMonth===t?"selected":"")+(s.L.currentMonth===t&&s.L.currentYear===s.L.selectedYear?" current":"")},e))))),y.createElement("div",{className:"selector day-selector"},y.createElement("div",{className:"day-selector-wrapper"},y.createElement("div",null,s.L.selectedMonthDays.map(e=>y.createElement("div",{key:e.dateNum,onClick:()=>{s.L.selectedDay=e.dateNum,setTimeout(()=>{scroll(0,this.findPos(document.getElementById("day_"+e.dateNum)))},0)},className:"day-col"+(s.L.selectedDay===e.dateNum?" selected":"")+(-1===c.C.currentUser.onDutyDays.indexOf(e.weekDay.dayLiteral)?" holiday":"")+(e.weekDay.isWeekend?" weekend":"")},y.createElement("div",{className:"day-name"},Object(c.B)(e.weekDay.dayLiteralShort.substr(0,2).toUpperCase())),y.createElement("a",{className:"day-number info-row"+(e.dateNum===s.L.currentDay&&s.L.currentMonth===s.L.selectedMonth&&s.L.selectedYear===s.L.currentYear?" current":"")},e.dateNum)))),y.createElement("div",null,s.L.selectedMonthDays.map(e=>{const t=s.I.appointmentsForDay(s.L.selectedYear,s.L.selectedMonth+1,e.dateNum,void 0,this.showAll?void 0:c.C.currentUser._id).length;return y.createElement("div",{key:e.dateNum,onClick:()=>{s.L.selectedDay=e.dateNum},className:"day-col"+(s.L.selectedDay===e.dateNum?" selected":"")+(-1===c.C.currentUser.onDutyDays.indexOf(e.weekDay.dayLiteral)?" holiday":"")+(e.weekDay.isWeekend?" weekend":"")},y.createElement("div",{className:"info-row appointments-num num-"+t},t))})))),y.createElement("div",{className:"week-view"},y.createElement("div",{className:"filters"},y.createElement(l.m,null,y.createElement(l.c,{sm:12,md:6,xs:24},y.createElement(o.a,{defaultChecked:this.showAll,onText:Object(c.B)("All appointments"),offText:Object(c.B)("My appointments only"),onChange:(e,t)=>{this.showAll=t}})),y.createElement(l.c,{sm:12,md:18,xs:0,className:"filter"},y.createElement(i.a,{placeholder:Object(c.B)("Type to filter"),onChange:(e,t)=>this.filter=t})))),y.createElement("div",{id:"full-day-cols"},s.L.selectedWeekDays.map(e=>y.createElement("div",{key:e.dateNum,id:"day_"+e.dateNum,className:"full-day-col"+(-1===c.C.currentUser.onDutyDays.indexOf(e.weekDay.dayLiteral)?" holiday":"")+(s.L.selectedDay===e.dateNum?" selected":""),onClick:()=>{s.L.selectedDay=e.dateNum},style:{width:(100/s.L.selectedWeekDays.length).toString()+"%"}},y.createElement("h4",null,y.createElement("b",null,e.dateNum),"   ",y.createElement("span",{className:"day-name"},Object(c.B)(e.weekDay.dayLiteral))),s.I.appointmentsForDay(s.L.selectedYear,s.L.selectedMonth+1,e.dateNum,this.filter,this.showAll?void 0:c.C.currentUser._id).sort((e,t)=>e.date-t.date).map(e=>y.createElement("div",{key:e._id,className:"appointment",onClick:()=>{this.appointment=s.I.list[s.I.getIndexByID(e._id)]}},y.createElement("div",{className:"time"},e.formattedTime),y.createElement("div",{className:"m-b-5"},y.createElement(l.l,{text:e.treatment?e.treatment.type:"",size:1})),y.createElement(s.v,{id:(e.patient||new s.r)._id}),e.operatingStaff.map(e=>y.createElement("div",{key:e._id,className:"m-t-5 fs-11"},y.createElement(u.a,{iconName:"Contact"})," ",e.name)))))))),y.createElement(s.b,{appointment:this.appointment,onDismiss:()=>this.appointment=null,onDelete:()=>this.appointment=null}))}findPos(e){let t=0;if(e&&e.offsetParent){do{t+=e.offsetTop}while(e=e.offsetParent);return t-70}return 0}};n.c([d.k],p.prototype,"filter",void 0),n.c([d.k],p.prototype,"appointment",void 0),n.c([d.k],p.prototype,"showAll",void 0),p=n.c([m.a],p)}}]);