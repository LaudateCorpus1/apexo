(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{320:function(e,t,n){"use strict";n.r(t),n.d(t,"StatisticsPage",function(){return b});var a=n(1),l=n(7),c=n(3),m=n(9),s=n(5),r=n(2),i=n(8),o=n(289),p=n(323),d=n(0);let b=class extends d.Component{constructor(){super(...arguments),this.appointment=null,this.charts=[m.C,m.H,m.ob,m.L,m.I,m.mb,m.M,m.A]}render(){return d.createElement("div",{className:"sc-pg p-15 p-l-10 p-r-10"},d.createElement(l.e,{maxItemsOnLoad:20,className:"appointments-data-table",heads:[Object(c.B)("Appointment"),Object(c.B)("Treatment"),Object(c.B)("Paid"),Object(c.B)("Outstanding"),Object(c.B)("Expenses"),Object(c.B)("Profits")],rows:m.hb.selectedAppointments.map(e=>({id:e._id,searchableString:e.searchableString,cells:[{dataValue:(e.patient||new m.m).name,component:d.createElement(l.k,{secondaryElement:d.createElement("span",null,Object(s.j)(e.date,m.db.getSetting("date_format"))," ","/"," ",e.operatingStaff.map(e=>d.createElement("i",{key:e._id},e.name," "))),name:(e.patient||new m.m).name,size:3}),onClick:()=>{this.appointment=e},className:"no-label"},{dataValue:e.treatmentID,component:d.createElement(l.l,{text:e.treatment?e.treatment.type:"",subText:Object(s.j)(e.date,m.db.getSetting("date_format")),size:3,onClick:()=>{}}),className:"hidden-xs"},{dataValue:e.paidAmount,component:d.createElement("span",null,m.db.getSetting("currencySymbol")+Object(s.s)(e.paidAmount).toString()),className:"hidden-xs"},{dataValue:e.outstandingAmount,component:d.createElement("span",null,m.db.getSetting("currencySymbol")+Object(s.s)(e.outstandingAmount).toString()),className:"hidden-xs"},{dataValue:e.expenses,component:d.createElement("span",null,m.db.getSetting("currencySymbol")+Object(s.s)(e.expenses).toString()),className:"hidden-xs"},{dataValue:e.profit,component:d.createElement("span",null,m.db.getSetting("currencySymbol")+Object(s.s)(e.profit).toString()),className:"hidden-xs"}]})),farItems:[{key:"1",onRender:()=>d.createElement(o.a,{placeholder:Object(c.B)("Filter by staff member"),defaultValue:"",options:[{key:"",text:Object(c.B)("All members")}].concat(m.fb.list.map(e=>({key:e._id,text:e.name}))),onChange:(e,t)=>{m.hb.filterByMember=t.key.toString()}})}],hideSearch:!0,commands:[{key:"2",onRender:()=>d.createElement(p.a,{onSelectDate:e=>{e&&(m.hb.startingDate=m.hb.getDayStartingPoint(e.getTime()))},value:new Date(m.hb.startingDate),formatDate:e=>`${Object(c.B)("From")}: ${Object(s.j)(e,m.db.getSetting("date_format"))}`})},{key:"3",onRender:()=>d.createElement(p.a,{onSelectDate:e=>{e&&(m.hb.endingDate=m.hb.getDayStartingPoint(e.getTime()))},value:new Date(m.hb.endingDate),formatDate:e=>`${Object(c.B)("Until")}: ${Object(s.j)(e,m.db.getSetting("date_format"))}`})}]}),this.appointment?d.createElement(l.a,{key:"ae",loader:()=>a.b(this,void 0,void 0,function*(){const e=(yield n.e(5).then(n.bind(null,303))).AppointmentEditorPanel;return d.createElement(e,{appointment:this.appointment,onDismiss:()=>this.appointment=null,onDelete:()=>this.appointment=null})})}):"",d.createElement("div",{className:"container-fluid m-t-20 quick"},d.createElement(l.n,{title:Object(c.B)("Quick stats")},d.createElement(l.m,null,d.createElement(l.c,{sm:6,xs:12},d.createElement("label",null,Object(c.B)("Appointments"),":"," ",d.createElement(l.o,{text:Object(s.s)(m.hb.selectedAppointments.length).toString(),type:l.q.primary}))),d.createElement(l.c,{sm:6,xs:12},d.createElement("label",null,Object(c.B)("Payments"),":"," ",d.createElement(l.o,{text:m.db.getSetting("currencySymbol")+Object(s.s)(m.hb.totalPayments).toString(),type:l.q.warning}))),d.createElement(l.c,{sm:6,xs:12},d.createElement("label",null,Object(c.B)("Expenses"),":"," ",d.createElement(l.o,{text:m.db.getSetting("currencySymbol")+Object(s.s)(m.hb.totalExpenses).toString(),type:l.q.danger}))),d.createElement(l.c,{sm:6,xs:12},d.createElement("label",null,Object(c.B)("Profits"),":"," ",d.createElement(l.o,{text:m.db.getSetting("currencySymbol")+Object(s.s)(m.hb.totalProfits).toString(),type:l.q.success})))))),d.createElement("div",{className:"charts container-fluid"},d.createElement("div",{className:"row"},this.charts.map((e,t)=>d.createElement("div",{key:t+e.name,className:"chart-wrapper "+(e.className||"col-xs-12 col-md-5 col-lg-4")},d.createElement(l.n,{title:Object(c.B)(e.name)},d.createElement(e.Component,null)))))))}};a.c([r.k],b.prototype,"appointment",void 0),a.c([r.k],b.prototype,"charts",void 0),b=a.c([i.a],b)}}]);