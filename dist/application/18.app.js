(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{161:function(e,t,a){"use strict";var r=a(123),n=a(0),o=a(1),l=a(124),s=a(42),c=a(44),i=a(57),d=a(143),m=a(149),u=Object(l.a)(),h=function(e){function t(t){var a=e.call(this,t)||this;return a._toggleButton=o.createRef(),a._onClick=function(e){var t=a.props,r=t.disabled,n=t.checked,o=t.onChange,l=t.onChanged,s=t.onClick,c=a.state.checked;r||(void 0===n&&a.setState({checked:!c}),o&&o(e,!c),l&&l(!c),s&&s(e))},a._warnMutuallyExclusive({checked:"defaultChecked"}),a._warnDeprecations({onAriaLabel:"ariaLabel",offAriaLabel:void 0,onChanged:"onChange"}),a.state={checked:!(!t.checked&&!t.defaultChecked)},a._id=t.id||Object(s.c)("Toggle"),a}return n.d(t,e),Object.defineProperty(t.prototype,"checked",{get:function(){return this.state.checked},enumerable:!0,configurable:!0}),t.prototype.componentWillReceiveProps=function(e){void 0!==e.checked&&this.setState({checked:!!e.checked})},t.prototype.render=function(){var e=this,t=this.props,a=t.as,r=void 0===a?"div":a,l=t.className,s=t.theme,i=t.disabled,h=t.keytipProps,p=t.label,y=t.ariaLabel,b=t.onAriaLabel,f=t.offAriaLabel,g=t.offText,C=t.onText,k=t.styles,v=t.inlineLabel,E=this.state.checked,N=E?C:g,x=E?b:f,w=Object(c.d)(this.props,c.g,["defaultChecked"]),D=u(k,{theme:s,className:l,disabled:i,checked:E,inlineLabel:v,onOffMissing:!C&&!g});return o.createElement(r,{className:D.root,hidden:w.hidden},p&&o.createElement(d.a,{htmlFor:this._id,className:D.label},p),o.createElement("div",{className:D.container},o.createElement(m.a,{keytipProps:h,ariaDescribedBy:w["aria-describedby"],disabled:i},function(t){return o.createElement("button",n.a({},w,t,{className:D.pill,disabled:i,id:e._id,type:"button",role:"switch",ref:e._toggleButton,"aria-disabled":i,"aria-checked":E,"aria-label":y||x,"data-is-focusable":!0,onChange:e._noop,onClick:e._onClick}),o.createElement("div",{className:D.thumb}))}),N&&o.createElement(d.a,{className:D.text},N)))},t.prototype.focus=function(){this._toggleButton.current&&this._toggleButton.current.focus()},t.prototype._noop=function(){},t}(i.a),p=a(20);a.d(t,"a",function(){return y});var y=Object(r.a)(h,function(e){var t,a,r,n,o,l,s,c=e.theme,i=e.className,d=e.disabled,m=e.checked,u=e.inlineLabel,h=e.onOffMissing,y=c.semanticColors,b=y.bodyBackground,f=y.inputBackgroundChecked,g=y.inputBackgroundCheckedHovered,C=y.disabledBodySubtext,k=y.inputBorderHovered,v=y.inputForegroundChecked,E=y.disabledBodySubtext,N=y.disabledBackground,x=y.smallInputBorder,w=y.inputBorderHovered,D=y.disabledBodySubtext,B=y.disabledText;return{root:["ms-Toggle",m&&"is-checked",!d&&"is-enabled",d&&"is-disabled",c.fonts.medium,{marginBottom:"8px"},u&&{display:"flex",alignItems:"center"},i],label:["ms-Toggle-label",d&&{color:B,selectors:(t={},t[p.f]={color:"GrayText"},t)},u&&!h&&{marginRight:16},h&&u&&{order:1,marginLeft:16}],container:["ms-Toggle-innerContainer",{display:"inline-flex",position:"relative"}],pill:["ms-Toggle-background",Object(p.t)(c,-3),{fontSize:"20px",boxSizing:"border-box",width:"2.2em",height:"1em",borderRadius:"1em",transition:"all 0.1s ease",borderWidth:"1px",borderStyle:"solid",background:b,borderColor:x,cursor:"pointer",display:"flex",alignItems:"center",padding:"0 .2em"},!d&&[!m&&{selectors:{":hover":[{borderColor:w}],":hover .ms-Toggle-thumb":[{selectors:(a={},a[p.f]={borderColor:"Highlight"},a)}]}},m&&[{background:f,borderColor:"transparent",justifyContent:"flex-end"},{selectors:(r={":hover":[{backgroundColor:g,borderColor:"transparent",selectors:(n={},n[p.f]={backgroundColor:"Highlight"},n)}]},r[p.f]={backgroundColor:"WindowText"},r)}]],d&&[{cursor:"default"},!m&&[{borderColor:D}],m&&[{backgroundColor:C,borderColor:"transparent",justifyContent:"flex-end"}]],!d&&{selectors:{"&:hover":{selectors:(o={},o[p.f]={borderColor:"Highlight"},o)}}}],thumb:["ms-Toggle-thumb",{width:".5em",height:".5em",borderRadius:".5em",transition:"all 0.1s ease",backgroundColor:k,borderColor:"transparent",borderWidth:".28em",borderStyle:"solid",boxSizing:"border-box"},!d&&m&&[{backgroundColor:v,selectors:(l={},l[p.f]={backgroundColor:"Window",borderColor:"Window"},l)}],d&&[!m&&[{backgroundColor:E}],m&&[{backgroundColor:N}]]],text:["ms-Toggle-stateText",{selectors:{"&&":{padding:"0",margin:"0 8px",userSelect:"none"}}},d&&{selectors:{"&&":{color:B,selectors:(s={},s[p.f]={color:"GrayText"},s)}}}]}},void 0,{scope:"Toggle"})},316:function(e,t,a){"use strict";a.r(t),a.d(t,"CalendarPage",function(){return p});var r=a(0),n=a(8),o=a(3),l=a(13),s=a(4),c=a(2),i=a(7),d=a(161),m=a(144),u=a(141),h=a(1);let p=class extends h.Component{constructor(){super(...arguments),this.filter="",this.appointment=null,this.showAll=!0}componentDidMount(){this.unifyHeight();const e=o.x.currentLocation.split("/")[1];if(!e)return;const t=e.split(/\W/);l.C.selectedYear=Object(s.r)(t[0]),l.C.selectedMonth=Object(s.r)(t[1])-1,l.C.selectedDay=Object(s.r)(t[2])}componentDidUpdate(){this.unifyHeight()}unifyHeight(){if(!document.getElementById("full-day-cols"))return;const e=document.getElementsByClassName("full-day-col");let t=0;for(let a=0;a<e.length;a++){const r=e[a].clientHeight;r>t&&(t=r)}for(let a=0;a<e.length;a++)e[a].style.minHeight=t?t+"px":"auto"}render(){return h.createElement("div",{className:"calendar-component container-fluid"},h.createElement("div",{className:"selector year-selector"},h.createElement(n.k,null,[l.C.currentYear-2,l.C.currentYear-1,l.C.currentYear,l.C.currentYear+1].map(e=>h.createElement(n.c,{key:e,span:6,className:"centered"},h.createElement("a",{onClick:()=>{l.C.selectedYear=e,l.C.selectedMonth=0,l.C.selectedDay=1},className:(l.C.selectedYear===e?"selected":"")+(l.C.currentYear===e?" current":"")},e))))),h.createElement("div",{className:"selector month-selector"},h.createElement(n.k,null,s.c.monthsShort().map((e,t)=>h.createElement(n.c,{key:e,sm:2,xs:4,className:"centered"},h.createElement("a",{onClick:()=>{l.C.selectedMonth=t,l.C.selectedDay=1},className:(l.C.selectedMonth===t?"selected":"")+(l.C.currentMonth===t&&l.C.currentYear===l.C.selectedYear?" current":"")},e))))),h.createElement("div",{className:"selector day-selector"},h.createElement("div",{className:"day-selector-wrapper"},h.createElement("div",null,l.C.selectedMonthDays.map(e=>h.createElement("div",{key:e.dateNum,onClick:()=>{l.C.selectedDay=e.dateNum,setTimeout(()=>{scroll(0,this.findPos(document.getElementById("day_"+e.dateNum)))},0)},className:"day-col"+(l.C.selectedDay===e.dateNum?" selected":"")+(-1===o.B.currentUser.onDutyDays.indexOf(e.weekDay.dayLiteral)?" holiday":"")+(e.weekDay.isWeekend?" weekend":"")},h.createElement("div",{className:"day-name"},Object(o.A)(e.weekDay.dayLiteralShort.substr(0,2).toUpperCase())),h.createElement("a",{className:"day-number info-row"+(e.dateNum===l.C.currentDay&&l.C.currentMonth===l.C.selectedMonth&&l.C.selectedYear===l.C.currentYear?" current":"")},e.dateNum)))),h.createElement("div",null,l.C.selectedMonthDays.map(e=>{const t=l.z.appointmentsForDay(l.C.selectedYear,l.C.selectedMonth+1,e.dateNum,void 0,this.showAll?void 0:o.B.currentUser._id).length;return h.createElement("div",{key:e.dateNum,onClick:()=>{l.C.selectedDay=e.dateNum},className:"day-col"+(l.C.selectedDay===e.dateNum?" selected":"")+(-1===o.B.currentUser.onDutyDays.indexOf(e.weekDay.dayLiteral)?" holiday":"")+(e.weekDay.isWeekend?" weekend":"")},h.createElement("div",{className:"info-row appointments-num num-"+t},t))})))),h.createElement("div",{className:"week-view"},h.createElement("div",{className:"filters"},h.createElement(n.k,null,h.createElement(n.c,{sm:12,md:6,xs:24},h.createElement(d.a,{defaultChecked:this.showAll,onText:Object(o.A)("All appointments"),offText:Object(o.A)("My appointments only"),onChange:(e,t)=>{this.showAll=t}})),h.createElement(n.c,{sm:12,md:18,xs:0,className:"filter"},h.createElement(m.a,{placeholder:Object(o.A)("Type to filter"),onChange:(e,t)=>this.filter=t})))),h.createElement("div",{id:"full-day-cols"},l.C.selectedWeekDays.map(e=>h.createElement("div",{key:e.dateNum,id:"day_"+e.dateNum,className:"full-day-col"+(-1===o.B.currentUser.onDutyDays.indexOf(e.weekDay.dayLiteral)?" holiday":"")+(l.C.selectedDay===e.dateNum?" selected":""),onClick:()=>{l.C.selectedDay=e.dateNum},style:{width:(100/l.C.selectedWeekDays.length).toString()+"%"}},h.createElement("h4",null,h.createElement("b",null,e.dateNum),"   ",h.createElement("span",{className:"day-name"},Object(o.A)(e.weekDay.dayLiteral))),l.z.appointmentsForDay(l.C.selectedYear,l.C.selectedMonth+1,e.dateNum,this.filter,this.showAll?void 0:o.B.currentUser._id).sort((e,t)=>e.date-t.date).map(e=>h.createElement("div",{key:e._id,className:"appointment",onClick:()=>{this.appointment=l.z.list[l.z.getIndexByID(e._id)]}},h.createElement("div",{className:"time"},e.formattedTime),h.createElement("div",{className:"m-b-5"},h.createElement(n.j,{text:e.treatment?e.treatment.type:"",size:1})),h.createElement(l.o,{id:(e.patient||new l.l)._id}),e.operatingStaff.map(e=>h.createElement("div",{key:e._id,className:"m-t-5 fs-11"},h.createElement(u.a,{iconName:"Contact"})," ",e.name)))))))),this.appointment?h.createElement(n.a,{key:"ae",loader:()=>r.b(this,void 0,void 0,function*(){const e=(yield Promise.all([a.e(0),a.e(3),a.e(28)]).then(a.bind(null,166))).AppointmentEditorPanel;return h.createElement(e,{appointment:this.appointment,onDismiss:()=>this.appointment=null,onDelete:()=>this.appointment=null})})}):"")}findPos(e){let t=0;if(e&&e.offsetParent){do{t+=e.offsetTop}while(e=e.offsetParent);return t-70}return 0}};r.c([c.k],p.prototype,"filter",void 0),r.c([c.k],p.prototype,"appointment",void 0),r.c([c.k],p.prototype,"showAll",void 0),p=r.c([i.a],p)}}]);