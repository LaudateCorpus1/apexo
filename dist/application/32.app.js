(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{318:function(e,t,n){"use strict";n.r(t),n.d(t,"PatientsPage",function(){return E});var a=n(0),i=n(8),c=n(3),l=n(13),s=n(4),o=n(2),r=n(7),m=n(147),d=n(19),p=n(148),h=n(138),u=n(141),b=n(6),A=n(1);let E=class extends A.Component{constructor(){super(...arguments),this.selectedId=c.x.currentLocation.split("/")[1],this.viewWhich=c.x.currentLocation.split("/")[1]?1:0}get patient(){return l.N.list.find(e=>e._id===this.selectedId)}get canEdit(){return c.B.currentUser.canEditPatients}render(){return A.createElement("div",{className:"patients-component p-15 p-l-10 p-r-10"},this.patient?A.createElement(m.a,{key:this.selectedId+this.viewWhich,isOpen:!!this.patient,type:d.a.medium,closeButtonAriaLabel:"Close",isLightDismiss:!0,onDismiss:()=>{this.selectedId="",this.viewWhich=0},onRenderNavigation:()=>A.createElement(i.k,{className:"panel-heading"},A.createElement(i.c,{span:22},A.createElement(i.i,{name:this.patient.name,secondaryElement:A.createElement("div",null,1===this.viewWhich?Object(c.A)("Patient Details"):"",2===this.viewWhich?Object(c.A)("Dental History"):"",3===this.viewWhich?Object(c.A)("Gallery and X-Rays"):"",4===this.viewWhich?Object(c.A)("Patient Appointments"):""),size:3})),A.createElement(i.c,{span:2,className:"close"},A.createElement(p.a,{iconProps:{iconName:"cancel"},onClick:()=>{this.selectedId="",this.viewWhich=0}})))},1===this.viewWhich?A.createElement(i.a,{key:"",loader:()=>a.b(this,void 0,void 0,function*(){const e=(yield Promise.all([n.e(0),n.e(2),n.e(8)]).then(n.bind(null,211))).PatientDetailsPanel;return A.createElement(e,{patient:this.patient})})}):"",2===this.viewWhich?A.createElement(i.a,{key:"",loader:()=>a.b(this,void 0,void 0,function*(){const e=(yield Promise.all([n.e(0),n.e(2),n.e(6)]).then(n.bind(null,212))).DentalHistoryPanel;return A.createElement(e,{patient:this.patient})})}):"",3===this.viewWhich?A.createElement(l.n,{patient:this.patient}):"",4===this.viewWhich?A.createElement(l.m,{patient:this.patient}):""):"",A.createElement(i.d,{maxItemsOnLoad:10,className:"patients-data-table",heads:[Object(c.A)("Patient"),Object(c.A)("Last/Next Appointment"),Object(c.A)("Total/Outstanding Payments"),Object(c.A)("Label")],rows:l.N.list.map(e=>({id:e._id,searchableString:e.searchableString,cells:[{dataValue:e.name+" "+e.age+" "+Object(l.H)(e.gender),component:A.createElement("div",null,A.createElement(i.i,{name:e.name,secondaryElement:A.createElement("span",null,Object(c.A)(Object(l.H)(e.gender))," ","- ",e.age," ",Object(c.A)("years old")),size:3}),A.createElement("br",null),A.createElement(h.a,{content:Object(c.A)("Patient Details")},A.createElement(p.a,{className:"action-button",iconProps:{iconName:"DietPlanNotebook"},onClick:()=>{this.selectedId=e._id,this.viewWhich=1}})),A.createElement(h.a,{content:Object(c.A)("Dental History")},A.createElement(p.a,{className:"action-button",iconProps:{iconName:"Teeth"},onClick:()=>{this.selectedId=e._id,this.viewWhich=2}})),A.createElement(h.a,{content:Object(c.A)("Gallery and X-Rays")},A.createElement(p.a,{className:"action-button",iconProps:{iconName:"PhotoCollection"},onClick:()=>{this.selectedId=e._id,this.viewWhich=3}})),c.B.currentUser.canViewAppointments?A.createElement(h.a,{content:Object(c.A)("Patient Appointments")},A.createElement(p.a,{className:"action-button",iconProps:{iconName:"Calendar"},onClick:()=>{this.selectedId=e._id,this.viewWhich=4}})):"",A.createElement(h.a,{content:Object(c.A)("Delete")},A.createElement(p.a,{className:"action-button delete",iconProps:{iconName:"Trash"},onClick:()=>l.N.deleteModal(e._id),disabled:!this.canEdit}))),className:"no-label"},{dataValue:(e.lastAppointment||e.nextAppointment||{date:0}).date,component:A.createElement("div",null,A.createElement(i.j,{text:e.lastAppointment&&e.lastAppointment.treatment?e.lastAppointment.treatment.type:"",subText:e.lastAppointment?Object(s.j)(e.lastAppointment.date,l.bb.getSetting("date_format")):Object(c.A)("No last appointment"),size:3,onRenderInitials:()=>A.createElement(u.a,{iconName:"Previous"}),onClick:()=>{},initialsColor:e.lastAppointment?void 0:b.a.transparent}),A.createElement("br",null),A.createElement(i.j,{text:e.nextAppointment&&e.nextAppointment.treatment?e.nextAppointment.treatment.type:"",subText:e.nextAppointment?Object(s.j)(e.nextAppointment.date,l.bb.getSetting("date_format")):Object(c.A)("No next appointment"),size:3,onRenderInitials:()=>A.createElement(u.a,{iconName:"Next"}),onClick:()=>{},initialsColor:e.nextAppointment?void 0:b.a.transparent})),className:"hidden-xs"},{dataValue:e.totalPayments,component:A.createElement("div",null,A.createElement(i.j,{text:l.bb.getSetting("currencySymbol")+e.totalPayments.toString(),subText:Object(c.A)("Payments made"),size:3,onRenderInitials:()=>A.createElement(u.a,{iconName:"CheckMark"}),onClick:()=>{},initialsColor:e.totalPayments>0?b.a.darkBlue:b.a.transparent}),A.createElement("br",null),A.createElement(i.j,{text:l.bb.getSetting("currencySymbol")+(e.differenceAmount<0?e.outstandingAmount.toString():e.differenceAmount>0?e.overpaidAmount.toString():"0"),subText:e.differenceAmount<0?Object(c.A)("Outstanding amount"):e.differenceAmount>0?Object(c.A)("Overpaid amount"):Object(c.A)("No outstanding amount"),size:3,onRenderInitials:()=>A.createElement(u.a,{iconName:"Cancel"}),onClick:()=>{},initialsColor:0!==e.differenceAmount?b.a.darkRed:b.a.transparent})),className:"hidden-xs"},{dataValue:e.labels.map(e=>e.text).join(","),component:A.createElement("div",null,e.labels.map((e,t)=>A.createElement(i.m,{key:t,text:e.text,type:e.type}))),className:"hidden-xs"}]})),commands:this.canEdit?[{key:"addNew",title:"Add new",name:Object(c.A)("Add new"),onClick:()=>{const e=new l.l;l.N.list.push(e),this.selectedId=e._id,this.viewWhich=1},iconProps:{iconName:"Add"}}]:[]}))}};a.c([o.k],E.prototype,"selectedId",void 0),a.c([o.k],E.prototype,"viewWhich",void 0),a.c([o.d],E.prototype,"patient",null),a.c([o.d],E.prototype,"canEdit",null),E=a.c([r.a],E)}}]);