(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{170:function(e,t,n){"use strict";n.r(t),n.d(t,"PatientsPage",function(){return v});var a=n(1),i=n(5),c=n(2),s=n(4),l=n(6),o=n(3),r=n(8),m=n(46),d=n(20),p=n(13),h=n(16),u=n(21),b=n(9),E=n(0);let v=class extends E.Component{constructor(){super(...arguments),this.selectedId=c.y.currentLocation.split("/")[1],this.viewWhich=c.y.currentLocation.split("/")[1]?1:0}get patient(){return s.W.list.find(e=>e._id===this.selectedId)}get canEdit(){return c.C.currentUser.canEditPatients}render(){return E.createElement("div",{className:"patients-component p-15 p-l-10 p-r-10"},this.patient?E.createElement(m.a,{key:this.selectedId+this.viewWhich,isOpen:!!this.patient,type:d.a.medium,closeButtonAriaLabel:"Close",isLightDismiss:!0,onDismiss:()=>{this.selectedId="",this.viewWhich=0},onRenderNavigation:()=>E.createElement(i.m,{className:"panel-heading"},E.createElement(i.c,{span:22},E.createElement(i.k,{name:this.patient.name,secondaryElement:E.createElement("div",null,1===this.viewWhich?Object(c.B)("Patient Details"):"",2===this.viewWhich?Object(c.B)("Dental History"):"",3===this.viewWhich?Object(c.B)("Gallery and X-Rays"):"",4===this.viewWhich?Object(c.B)("Patient Appointments"):""),size:3})),E.createElement(i.c,{span:2,className:"close"},E.createElement(p.a,{iconProps:{iconName:"cancel"},onClick:()=>{this.selectedId="",this.viewWhich=0}})))},1===this.viewWhich?E.createElement(s.t,{patient:this.patient}):"",2===this.viewWhich?E.createElement(s.g,{patient:this.patient}):"",3===this.viewWhich?E.createElement(s.u,{patient:this.patient}):"",4===this.viewWhich?E.createElement(s.s,{patient:this.patient}):""):"",E.createElement(i.e,{maxItemsOnLoad:10,className:"patients-data-table",heads:[Object(c.B)("Patient"),Object(c.B)("Last/Next Appointment"),Object(c.B)("Total/Outstanding Payments"),Object(c.B)("Label")],rows:s.W.list.map(e=>({id:e._id,searchableString:e.searchableString,cells:[{dataValue:e.name+" "+e.age+" "+Object(s.Q)(e.gender),component:E.createElement("div",null,E.createElement(i.k,{name:e.name,secondaryElement:E.createElement("span",null,Object(c.B)(Object(s.Q)(e.gender))," ","- ",e.age," ",Object(c.B)("years old")),size:3}),E.createElement("br",null),E.createElement(h.a,{content:Object(c.B)("Patient Details")},E.createElement(p.a,{className:"action-button",iconProps:{iconName:"DietPlanNotebook"},onClick:()=>{this.selectedId=e._id,this.viewWhich=1}})),E.createElement(h.a,{content:Object(c.B)("Dental History")},E.createElement(p.a,{className:"action-button",iconProps:{iconName:"Teeth"},onClick:()=>{this.selectedId=e._id,this.viewWhich=2}})),E.createElement(h.a,{content:Object(c.B)("Gallery and X-Rays")},E.createElement(p.a,{className:"action-button",iconProps:{iconName:"PhotoCollection"},onClick:()=>{this.selectedId=e._id,this.viewWhich=3}})),c.C.currentUser.canViewAppointments?E.createElement(h.a,{content:Object(c.B)("Patient Appointments")},E.createElement(p.a,{className:"action-button",iconProps:{iconName:"Calendar"},onClick:()=>{this.selectedId=e._id,this.viewWhich=4}})):"",E.createElement(h.a,{content:Object(c.B)("Delete")},E.createElement(p.a,{className:"action-button delete",iconProps:{iconName:"Trash"},onClick:()=>s.W.deleteModal(e._id),disabled:!this.canEdit}))),className:"no-label"},{dataValue:(e.lastAppointment||e.nextAppointment||{date:0}).date,component:E.createElement("div",null,E.createElement(i.l,{text:e.lastAppointment&&e.lastAppointment.treatment?e.lastAppointment.treatment.type:"",subText:e.lastAppointment?Object(l.j)(e.lastAppointment.date,s.kb.getSetting("date_format")):Object(c.B)("No last appointment"),size:3,onRenderInitials:()=>E.createElement(u.a,{iconName:"Previous"}),onClick:()=>{},initialsColor:e.lastAppointment?void 0:b.a.transparent}),E.createElement("br",null),E.createElement(i.l,{text:e.nextAppointment&&e.nextAppointment.treatment?e.nextAppointment.treatment.type:"",subText:e.nextAppointment?Object(l.j)(e.nextAppointment.date,s.kb.getSetting("date_format")):Object(c.B)("No next appointment"),size:3,onRenderInitials:()=>E.createElement(u.a,{iconName:"Next"}),onClick:()=>{},initialsColor:e.nextAppointment?void 0:b.a.transparent})),className:"hidden-xs"},{dataValue:e.totalPayments,component:E.createElement("div",null,E.createElement(i.l,{text:s.kb.getSetting("currencySymbol")+e.totalPayments.toString(),subText:Object(c.B)("Payments made"),size:3,onRenderInitials:()=>E.createElement(u.a,{iconName:"CheckMark"}),onClick:()=>{},initialsColor:e.totalPayments>0?b.a.darkBlue:b.a.transparent}),E.createElement("br",null),E.createElement(i.l,{text:s.kb.getSetting("currencySymbol")+(e.differenceAmount<0?e.outstandingAmount.toString():e.differenceAmount>0?e.overpaidAmount.toString():"0"),subText:e.differenceAmount<0?Object(c.B)("Outstanding amount"):e.differenceAmount>0?Object(c.B)("Overpaid amount"):Object(c.B)("No outstanding amount"),size:3,onRenderInitials:()=>E.createElement(u.a,{iconName:"Cancel"}),onClick:()=>{},initialsColor:0!==e.differenceAmount?b.a.darkRed:b.a.transparent})),className:"hidden-xs"},{dataValue:e.labels.map(e=>e.text).join(","),component:E.createElement("div",null,e.labels.map((e,t)=>E.createElement(i.o,{key:t,text:e.text,type:e.type}))),className:"hidden-xs"}]})),commands:this.canEdit?[{key:"addNew",title:"Add new",name:Object(c.B)("Add new"),onClick:()=>{const e=new s.r;s.W.list.push(e),this.selectedId=e._id,this.viewWhich=1},iconProps:{iconName:"Add"}}]:[]}))}};a.c([o.k],v.prototype,"selectedId",void 0),a.c([o.k],v.prototype,"viewWhich",void 0),a.c([o.d],v.prototype,"patient",null),a.c([o.d],v.prototype,"canEdit",null),v=a.c([r.a],v)}}]);