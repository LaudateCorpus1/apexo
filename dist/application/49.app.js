(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{349:function(e,t,n){"use strict";n.r(t),n.d(t,"StatisticsPage",function(){return D});var a=n(0),l=n(15),c=n(3),r=n(10),i=n(5),s=n(2),o=n(7),m=n(156),d=n(159),p=n(360),b=n(168),u=n(1),g=n(29);const E=g({loader:()=>Object(a.b)(void 0,void 0,void 0,function*(){return(yield Promise.all([n.e(2),n.e(24)]).then(n.bind(null,186))).AppointmentEditorPanel}),loading:()=>u.createElement(m.a,null)}),y=g({loader:()=>Object(a.b)(void 0,void 0,void 0,function*(){return(yield n.e(41).then(n.bind(null,317))).AgeBarChart}),loading:()=>u.createElement(m.a,null)}),v=g({loader:()=>Object(a.b)(void 0,void 0,void 0,function*(){return(yield n.e(42).then(n.bind(null,318))).AppointmentsByDateChart}),loading:()=>u.createElement(m.a,null)}),O=g({loader:()=>Object(a.b)(void 0,void 0,void 0,function*(){return(yield n.e(43).then(n.bind(null,319))).FinancesByDateChart}),loading:()=>u.createElement(m.a,null)}),h=g({loader:()=>Object(a.b)(void 0,void 0,void 0,function*(){return(yield n.e(44).then(n.bind(null,320))).GenderPieChart}),loading:()=>u.createElement(m.a,null)}),j=g({loader:()=>Object(a.b)(void 0,void 0,void 0,function*(){return(yield n.e(45).then(n.bind(null,321))).MostAppliedTreatmentsChart}),loading:()=>u.createElement(m.a,null)}),S=g({loader:()=>Object(a.b)(void 0,void 0,void 0,function*(){return(yield n.e(46).then(n.bind(null,322))).MostInvolvedTeethChart}),loading:()=>u.createElement(m.a,null)}),f=g({loader:()=>Object(a.b)(void 0,void 0,void 0,function*(){return(yield n.e(47).then(n.bind(null,323))).TreatmentsByGenderChart}),loading:()=>u.createElement(m.a,null)}),x=g({loader:()=>Object(a.b)(void 0,void 0,void 0,function*(){return(yield n.e(48).then(n.bind(null,324))).TreatmentsNumberChart}),loading:()=>u.createElement(m.a,null)});let D=class extends u.Component{get appointment(){return r.E.docs.find(e=>e._id===c.r.selectedID)}render(){return u.createElement("div",{className:"sc-pg"},u.createElement(l.f,{maxItemsOnLoad:20,className:"appointments-data-table",heads:[Object(c.t)("Appointment"),Object(c.t)("Treatment"),Object(c.t)("Paid"),Object(c.t)("Outstanding"),Object(c.t)("Expenses"),Object(c.t)("Profits")],rows:c.r.innerWidth>999?r.pb.selectedAppointments.map(e=>({id:e._id,searchableString:e.searchableString,cells:[{dataValue:(e.patient||{name:""}).name,component:u.createElement(l.n,{secondaryElement:u.createElement("span",null,Object(i.l)(e.date,r.lb.getSetting("date_format"))," ","/"," ",e.operatingStaff.map(e=>u.createElement("i",{key:e._id},e.name," "))),name:(e.patient||{name:""}).name,size:3}),onClick:()=>{c.r.selectID(e._id),setTimeout(()=>c.r.selectSub("details"),100)},className:"no-label"},{dataValue:e.treatmentID,component:u.createElement(l.o,{text:e.treatment?e.treatment.type:"",subText:Object(i.l)(e.date,r.lb.getSetting("date_format")),size:3}),className:"hidden-xs"},{dataValue:e.paidAmount,component:u.createElement("span",null,r.lb.getSetting("currencySymbol")+Object(i.u)(e.paidAmount).toString()),className:"hidden-xs"},{dataValue:e.outstandingAmount,component:u.createElement("span",null,r.lb.getSetting("currencySymbol")+Object(i.u)(e.outstandingAmount).toString()),className:"hidden-xs"},{dataValue:e.expenses,component:u.createElement("span",null,r.lb.getSetting("currencySymbol")+Object(i.u)(e.expenses).toString()),className:"hidden-xs"},{dataValue:e.profit,component:u.createElement("span",null,r.lb.getSetting("currencySymbol")+Object(i.u)(e.profit).toString()),className:"hidden-xs"}]})):[],farItems:[{key:"1",onRender:()=>u.createElement(d.a,{defaultSelectedKey:"all",options:[{key:"all",text:Object(c.t)("All staff members")}].concat(r.nb.operatingStaff.map(e=>({key:e._id,text:e.name}))),onChange:(e,t)=>{r.pb.specificMemberID=t.key.toString()}})}],hideSearch:!0,commands:[{key:"2",onRender:()=>u.createElement(p.a,{onSelectDate:e=>{e&&(e.setHours(0,0,0,0),r.pb.startingDate=e.getTime())},value:new Date(r.pb.startingDate),formatDate:e=>`${Object(c.t)("From")}: ${Object(i.l)(e,r.lb.getSetting("date_format"))}`})},{key:"3",onRender:()=>u.createElement(p.a,{onSelectDate:e=>{e&&(e.setHours(0,0,0,0),r.pb.endingDate=e.getTime())},value:new Date(r.pb.endingDate),formatDate:e=>`${Object(c.t)("Until")}: ${Object(i.l)(e,r.lb.getSetting("date_format"))}`})}]}),this.appointment?u.createElement(E,{appointment:this.appointment,onDismiss:()=>c.r.unSelect()}):"",u.createElement("div",{className:"totals"},u.createElement(l.p,null,u.createElement(l.e,{sm:6,xs:12},u.createElement(b.a,null,Object(c.t)("Appointments"),":"," ",u.createElement(l.s,{text:Object(i.u)(r.pb.selectedAppointments.length).toString(),type:l.x.primary}))),u.createElement(l.e,{sm:6,xs:12},u.createElement(b.a,null,Object(c.t)("Payments"),":"," ",u.createElement(l.s,{text:r.lb.getSetting("currencySymbol")+Object(i.u)(r.pb.totalPayments).toString(),type:l.x.warning}))),u.createElement(l.e,{sm:6,xs:12},u.createElement(b.a,null,Object(c.t)("Expenses"),":"," ",u.createElement(l.s,{text:r.lb.getSetting("currencySymbol")+Object(i.u)(r.pb.totalExpenses).toString(),type:l.x.danger}))),u.createElement(l.e,{sm:6,xs:12},u.createElement(b.a,null,Object(c.t)("Profits"),":"," ",u.createElement(l.s,{text:r.lb.getSetting("currencySymbol")+Object(i.u)(r.pb.totalProfits).toString(),type:l.x.success}))))),u.createElement("div",{className:"charts container-fluid"},u.createElement("div",{className:"row"},u.createElement("div",{className:"chart-wrapper col-xs-12"},u.createElement(l.q,{title:Object(c.t)("Appointments by Date")},u.createElement(v,{selectedAppointmentsByDay:r.pb.selectedAppointmentsByDay}))),u.createElement("div",{className:"chart-wrapper col-xs-12"},u.createElement(l.q,{title:Object(c.t)("Finances by Date")},u.createElement(O,{dateFormat:r.lb.getSetting("date_format"),selectedFinancesByDay:r.pb.selectedFinancesByDay}))),u.createElement("div",{className:"chart-wrapper col-xs-12 col-lg-6"},u.createElement(l.q,{title:Object(c.t)("Patients' Gender")},u.createElement(h,{selectedPatients:r.pb.selectedPatients}))),u.createElement("div",{className:"chart-wrapper col-xs-12 col-lg-6"},u.createElement(l.q,{title:Object(c.t)("Most Applied Treatments")},u.createElement(j,{selectedAppointments:r.pb.selectedAppointments}))),u.createElement("div",{className:"chart-wrapper col-xs-12 col-lg-6"},u.createElement(l.q,{title:Object(c.t)("Most Involved Teeth")},u.createElement(S,{selectedAppointments:r.pb.selectedAppointments}))),u.createElement("div",{className:"chart-wrapper col-xs-12 col-lg-6"},u.createElement(l.q,{title:Object(c.t)("Treatments by gender")},u.createElement(f,{selectedTreatments:r.pb.selectedTreatments}))),u.createElement("div",{className:"chart-wrapper col-xs-12 col-lg-6"},u.createElement(l.q,{title:Object(c.t)("Treatments by profits")},u.createElement(x,{selectedTreatments:r.pb.selectedTreatments}))),u.createElement("div",{className:"chart-wrapper col-xs-12 col-lg-6"},u.createElement(l.q,{title:Object(c.t)("Patients' Age")},u.createElement(y,{selectedPatients:r.pb.selectedPatients}))))))}};Object(a.c)([s.d],D.prototype,"appointment",null),D=Object(a.c)([o.a],D)}}]);