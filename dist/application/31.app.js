(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{317:function(e,t,n){"use strict";n.r(t),n.d(t,"OrthoPage",function(){return O});var i=n(0),a=n(8),s=n(3),l=n(13),c=n(4),o=n(2),r=n(7),d=n(138),m=n(148),h=n(141),p=n(6),u=n(147),b=n(19),E=n(144),A=n(81),v=n(1);let O=class extends v.Component{constructor(){super(...arguments),this.showAdditionPanel=!1,this.newPatientName="",this.selectedId="",this.viewWhich=0}get selectedCase(){return l.L.list.find(e=>e._id===this.selectedId)}get selectedPatient(){if(this.selectedCase&&this.selectedCase.patient)return this.selectedCase.patient}get canEdit(){return s.B.currentUser.canEditOrtho}render(){return v.createElement("div",{className:"orthodontic-cases-component p-15 p-l-10 p-r-10"},v.createElement(a.d,{maxItemsOnLoad:10,className:"orthodontic-cases-data-table",heads:[Object(s.A)("Orthodontic Patient"),Object(s.A)("Started/Finished Treatment"),Object(s.A)("Last/Next Appointment"),Object(s.A)("Total/Outstanding Payments")],rows:l.L.filtered.filter(e=>e.patient).map(e=>{const t=e.patient||new l.l;return{id:e._id,searchableString:e.searchableString,cells:[{dataValue:t.name,component:v.createElement("div",null,v.createElement(a.i,{name:t.name,secondaryElement:v.createElement("span",null,Object(s.A)(Object(l.H)(t.gender))," ","- ",t.age," ",Object(s.A)("years old")),size:3}),v.createElement("br",null),v.createElement(d.a,{content:Object(s.A)("Patient Details")},v.createElement(m.a,{className:"action-button",iconProps:{iconName:"DietPlanNotebook"},onClick:()=>{this.selectedId=e._id,this.viewWhich=1}})),v.createElement(d.a,{content:Object(s.A)("Dental History")},v.createElement(m.a,{className:"action-button",iconProps:{iconName:"Teeth"},onClick:()=>{this.selectedId=e._id,this.viewWhich=2}})),v.createElement(d.a,{content:Object(s.A)("Orthodontic Case Sheet")},v.createElement(m.a,{className:"action-button",iconProps:{iconName:"GroupedList"},onClick:()=>{this.selectedId=e._id,this.viewWhich=3}})),v.createElement(d.a,{content:Object(s.A)("Orthodontic Album")},v.createElement(m.a,{className:"action-button",iconProps:{iconName:"TripleColumn"},onClick:()=>{this.selectedId=e._id,this.viewWhich=4}})),v.createElement(d.a,{content:Object(s.A)("Gallery and X-Rays")},v.createElement(m.a,{className:"action-button",iconProps:{iconName:"PhotoCollection"},onClick:()=>{this.selectedId=e._id,this.viewWhich=5}})),s.B.currentUser.canViewAppointments?v.createElement(d.a,{content:Object(s.A)("Patient Appointments")},v.createElement(m.a,{className:"action-button",iconProps:{iconName:"Calendar"},onClick:()=>{this.selectedId=e._id,this.viewWhich=6}})):"",v.createElement(d.a,{content:Object(s.A)("Delete")},v.createElement(m.a,{className:"action-button delete",iconProps:{iconName:"Trash"},onClick:()=>l.L.deleteModal(e._id),disabled:!this.canEdit}))),className:"no-label"},{dataValue:e.isFinished?1/0:e.startedDate,component:v.createElement("div",null,v.createElement(a.j,{text:e.isStarted?Object(c.j)(e.startedDate,l.bb.getSetting("date_format")):"",subText:e.isStarted?Object(s.A)("Started treatment"):Object(s.A)("Has not started yet"),size:3,onRenderInitials:()=>v.createElement(h.a,{iconName:"info"}),onClick:()=>{},initialsColor:e.isStarted?p.a.teal:p.a.transparent}),v.createElement("br",null),v.createElement(a.j,{text:e.isFinished?Object(c.j)(e.finishedDate,l.bb.getSetting("date_format")):"",subText:e.isFinished?Object(s.A)("Finished treatment"):Object(s.A)("Has not finished yet"),size:3,onRenderInitials:()=>v.createElement(h.a,{iconName:"CheckMark"}),onClick:()=>{},initialsColor:e.isFinished?p.a.blue:p.a.transparent})),className:"hidden-xs"},{dataValue:(t.nextAppointment||{date:0}).date,component:v.createElement("div",null,v.createElement(a.j,{text:t.lastAppointment&&t.lastAppointment.treatment?t.lastAppointment.treatment.type:"",subText:t.lastAppointment?Object(c.j)(t.lastAppointment.date,l.bb.getSetting("date_format")):Object(s.A)("No last appointment"),size:3,onRenderInitials:()=>v.createElement(h.a,{iconName:"Previous"}),onClick:()=>{},initialsColor:t.lastAppointment?void 0:p.a.transparent}),v.createElement("br",null),v.createElement(a.j,{text:t.nextAppointment&&t.nextAppointment.treatment?t.nextAppointment.treatment.type:"",subText:t.nextAppointment?Object(c.j)(t.nextAppointment.date,l.bb.getSetting("date_format")):Object(s.A)("No next appointment"),size:3,onRenderInitials:()=>v.createElement(h.a,{iconName:"Next"}),onClick:()=>{},initialsColor:t.nextAppointment?void 0:p.a.transparent})),className:"hidden-xs"},{dataValue:t.totalPayments,component:v.createElement("div",null,v.createElement(a.j,{text:l.bb.getSetting("currencySymbol")+t.totalPayments.toString(),subText:Object(s.A)("Payments made"),size:3,onRenderInitials:()=>v.createElement(h.a,{iconName:"CheckMark"}),onClick:()=>{},initialsColor:t.totalPayments>0?p.a.darkBlue:p.a.transparent}),v.createElement("br",null),v.createElement(a.j,{text:l.bb.getSetting("currencySymbol")+(t.differenceAmount<0?t.outstandingAmount.toString():t.differenceAmount>0?t.overpaidAmount.toString():"0"),subText:t.differenceAmount<0?Object(s.A)("Outstanding amount"):t.differenceAmount>0?Object(s.A)("Overpaid amount"):Object(s.A)("No outstanding amount"),size:3,onRenderInitials:()=>v.createElement(h.a,{iconName:"Cancel"}),onClick:()=>{},initialsColor:0!==t.differenceAmount?p.a.darkRed:p.a.transparent})),className:"hidden-xs"}]}}),commands:this.canEdit?[{key:"addNew",title:"Add new",name:Object(s.A)("Add new"),onClick:()=>this.showAdditionPanel=!0,iconProps:{iconName:"Add"}}]:[]}),v.createElement(u.a,{isOpen:this.showAdditionPanel,type:b.a.smallFixedFar,closeButtonAriaLabel:"Close",isLightDismiss:!0,onDismiss:()=>{this.showAdditionPanel=!1}},v.createElement("h4",null,Object(s.A)("Choose patient")),v.createElement("br",null),v.createElement(a.n,{strict:!0,value:[],options:l.L.patientsWithNoOrtho.map(e=>({key:e._id,text:e.name})),onAdd:e=>{this.showAdditionPanel=!1;const t=new l.k;t.patientID=e.key,l.L.list.push(t),this.selectedId=t._id,this.viewWhich=3},placeholder:Object(s.A)("Type to select patient")}),v.createElement("br",null),v.createElement("hr",null),v.createElement("h4",null,"Or add new patient"),v.createElement("br",null),v.createElement(E.a,{placeholder:Object(s.A)("Patient name"),value:this.newPatientName,onChange:(e,t)=>this.newPatientName=t}),v.createElement(A.a,{onClick:()=>{const e=new l.l;e.name=this.newPatientName;const t=new l.k;t.patientID=e._id,l.N.list.push(e),l.L.list.push(t),this.newPatientName="",this.selectedId=t._id,this.viewWhich=3},iconProps:{iconName:"add"},text:Object(s.A)("Add new")})),v.createElement(u.a,{isOpen:!!(this.selectedCase&&this.selectedPatient&&this.viewWhich),type:b.a.medium,closeButtonAriaLabel:"Close",isLightDismiss:!0,onDismiss:()=>{this.selectedId="",this.viewWhich=0},onRenderNavigation:()=>this.selectedCase&&this.selectedPatient?v.createElement(a.k,{className:"panel-heading"},v.createElement(a.c,{span:22},v.createElement(a.i,{name:this.selectedPatient.name,secondaryElement:v.createElement("span",null,1===this.viewWhich?Object(s.A)("Patient Details"):"",2===this.viewWhich?Object(s.A)("Dental History"):"",3===this.viewWhich?Object(s.A)("Orthodontic Case Sheet"):"",4===this.viewWhich?Object(s.A)("Orthodontic Album"):"",5===this.viewWhich?Object(s.A)("Gallery and X-Rays"):"",6===this.viewWhich?Object(s.A)("Patient Appointments"):""),size:3})),v.createElement(a.c,{span:2,className:"close"},v.createElement(m.a,{iconProps:{iconName:"cancel"},onClick:()=>{this.selectedId="",this.viewWhich=0}}))):v.createElement("div",null)},v.createElement("div",null,this.selectedCase&&this.selectedPatient?v.createElement("div",{className:"ortho-single-component"},1===this.viewWhich?v.createElement(a.a,{key:"patient-detail",loader:()=>i.b(this,void 0,void 0,function*(){const e=(yield Promise.all([n.e(0),n.e(2),n.e(8)]).then(n.bind(null,211))).PatientDetailsPanel;return v.createElement(e,{patient:this.selectedPatient})})}):"",2===this.viewWhich?v.createElement(a.a,{key:"patient-detail",loader:()=>i.b(this,void 0,void 0,function*(){const e=(yield Promise.all([n.e(0),n.e(2),n.e(6)]).then(n.bind(null,212))).DentalHistoryPanel;return v.createElement(e,{patient:this.selectedPatient})})}):"",3===this.viewWhich?v.createElement(a.a,{key:"ortho-case-sheet",loader:()=>i.b(this,void 0,void 0,function*(){const e=(yield Promise.all([n.e(0),n.e(2),n.e(20)]).then(n.bind(null,295))).OrthoCaseSheetPanel;return this.selectedCase?v.createElement(e,{orthoCase:this.selectedCase}):v.createElement("div",null)})}):"",4===this.viewWhich?v.createElement(a.a,{key:"ortho-records",loader:()=>i.b(this,void 0,void 0,function*(){const e=(yield Promise.all([n.e(0),n.e(2),n.e(15),n.e(21)]).then(n.bind(null,296))).OrthoRecordsPanel;return this.selectedCase?v.createElement(e,{orthoCase:this.selectedCase}):v.createElement("div",null)})}):"",5===this.viewWhich?v.createElement(a.a,{key:"ortho-gallery",loader:()=>i.b(this,void 0,void 0,function*(){const e=(yield n.e(30).then(n.bind(null,297))).OrthoGalleryPanel;return this.selectedCase?v.createElement(e,{orthoCase:this.selectedCase}):v.createElement("div",null)})}):"",6===this.viewWhich?v.createElement(l.m,{patient:this.selectedPatient}):""):"")))}};i.c([o.k],O.prototype,"showAdditionPanel",void 0),i.c([o.k],O.prototype,"newPatientName",void 0),i.c([o.k],O.prototype,"selectedId",void 0),i.c([o.k],O.prototype,"viewWhich",void 0),i.c([o.d],O.prototype,"selectedCase",null),i.c([o.d],O.prototype,"selectedPatient",null),i.c([o.d],O.prototype,"canEdit",null),O=i.c([r.a],O)}}]);