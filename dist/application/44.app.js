(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[44],{

/***/ "./src/modules/treatments/components/page.treatments.tsx":
/*!***************************************************************!*\
  !*** ./src/modules/treatments/components/page.treatments.tsx ***!
  \***************************************************************/
/*! exports provided: Treatments */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Treatments\", function() { return Treatments; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _common_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @common-components */ \"./src/common-components/index.ts\");\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @core */ \"./src/core/index.ts\");\n/* harmony import */ var _modules__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @modules */ \"./src/modules/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @utils */ \"./src/utils/index.ts\");\n/* harmony import */ var mobx__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! mobx */ \"./node_modules/mobx/lib/mobx.module.js\");\n/* harmony import */ var mobx_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! mobx-react */ \"./node_modules/mobx-react/dist/mobx-react.module.js\");\n/* harmony import */ var office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! office-ui-fabric-react */ \"./node_modules/office-ui-fabric-react/lib/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_8__);\n\n\n\n\n\n\n\n\n\n\nlet Treatments = class Treatments extends react__WEBPACK_IMPORTED_MODULE_8__[\"Component\"] {\n    constructor() {\n        super(...arguments);\n        this.tabs = [\n            {\n                key: \"details\",\n                icon: \"cricket\",\n                title: \"Treatment Details\"\n            },\n            {\n                key: \"delete\",\n                icon: \"trash\",\n                title: \"Delete\",\n                hidden: !this.canEdit\n            }\n        ];\n    }\n    get canEdit() {\n        return _core__WEBPACK_IMPORTED_MODULE_2__[\"user\"].currentUser.canEditTreatments;\n    }\n    get selectedTreatment() {\n        return _modules__WEBPACK_IMPORTED_MODULE_3__[\"treatments\"].docs.find(x => x._id === _core__WEBPACK_IMPORTED_MODULE_2__[\"router\"].selectedID);\n    }\n    render() {\n        return (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"div\", { className: \"tc-pg\" },\n            react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"DataTableComponent\"], { onDelete: this.canEdit\n                    ? id => {\n                        _modules__WEBPACK_IMPORTED_MODULE_3__[\"treatments\"].deleteModal(id);\n                    }\n                    : undefined, commands: this.canEdit\n                    ? [\n                        {\n                            key: \"addNew\",\n                            title: \"Add new\",\n                            name: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Add new\"),\n                            onClick: () => {\n                                const treatment = _modules__WEBPACK_IMPORTED_MODULE_3__[\"treatments\"].new();\n                                _modules__WEBPACK_IMPORTED_MODULE_3__[\"treatments\"].add(treatment);\n                                _core__WEBPACK_IMPORTED_MODULE_2__[\"router\"].select({\n                                    id: treatment._id,\n                                    tab: \"details\"\n                                });\n                            },\n                            iconProps: {\n                                iconName: \"Add\"\n                            }\n                        }\n                    ]\n                    : [], heads: [\n                    Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Treatment\"),\n                    Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Expenses/unit\"),\n                    Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Done appointments\"),\n                    Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Upcoming appointments\")\n                ], rows: _modules__WEBPACK_IMPORTED_MODULE_3__[\"treatments\"].docs.map(treatment => {\n                    let done = 0;\n                    let upcoming = 0;\n                    const appointmentsArr = _modules__WEBPACK_IMPORTED_MODULE_3__[\"appointments\"].docs;\n                    for (let index = 0; index < appointmentsArr.length; index++) {\n                        const appointment = appointmentsArr[index];\n                        if (appointment.treatmentID !== treatment._id) {\n                            continue;\n                        }\n                        if (appointment.isUpcoming) {\n                            upcoming++;\n                        }\n                        if (appointment.isDone) {\n                            done++;\n                        }\n                    }\n                    return {\n                        id: treatment._id,\n                        searchableString: treatment.searchableString,\n                        actions: this.tabs\n                            .filter(x => !x.hidden)\n                            .map(x => ({\n                            key: x.key,\n                            title: x.title,\n                            icon: x.icon,\n                            onClick: () => {\n                                if (x.key === \"delete\") {\n                                    _modules__WEBPACK_IMPORTED_MODULE_3__[\"treatments\"].deleteModal(treatment._id);\n                                }\n                                else {\n                                    _core__WEBPACK_IMPORTED_MODULE_2__[\"router\"].select({\n                                        id: treatment._id,\n                                        tab: x.key\n                                    });\n                                }\n                            }\n                        })),\n                        cells: [\n                            {\n                                dataValue: treatment.type,\n                                component: (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"ProfileSquaredComponent\"], { text: treatment.type, onRenderSecondaryText: () => (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"span\", { className: \"itl\" }, `${Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Expenses\")}: ${_modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].getSetting(\"currencySymbol\")}${treatment.expenses} ${Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"per unit\")}`)) })),\n                                onClick: () => {\n                                    _core__WEBPACK_IMPORTED_MODULE_2__[\"router\"].select({\n                                        id: treatment._id,\n                                        tab: \"details\"\n                                    });\n                                },\n                                className: \"no-label\"\n                            },\n                            {\n                                dataValue: treatment.expenses,\n                                component: (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"span\", null,\n                                    _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].getSetting(\"currencySymbol\"),\n                                    treatment.expenses)),\n                                className: \"hidden-xs\"\n                            },\n                            {\n                                dataValue: done,\n                                component: (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"span\", null,\n                                    done,\n                                    \" \",\n                                    Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"done\"))),\n                                className: \"hidden-xs\"\n                            },\n                            {\n                                dataValue: upcoming,\n                                component: (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"span\", null,\n                                    upcoming,\n                                    \" \",\n                                    Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"upcoming\"))),\n                                className: \"hidden-xs\"\n                            }\n                        ]\n                    };\n                }), maxItemsOnLoad: 20 }),\n            this.selectedTreatment ? (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"Panel\"], { isOpen: !!this.selectedTreatment, type: office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"PanelType\"].medium, closeButtonAriaLabel: \"Close\", isLightDismiss: true, onDismiss: () => {\n                    _core__WEBPACK_IMPORTED_MODULE_2__[\"router\"].unSelect();\n                }, onRenderNavigation: () => (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"div\", { className: \"panel-heading\" },\n                    react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"PanelTop\"], { title: this.selectedTreatment.type, type: \"Treatment\", subTitle: `${Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Expenses\")}: ${_modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].getSetting(\"currencySymbol\")}${this.selectedTreatment.expenses} ${Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"per unit\")}`, onDismiss: () => _core__WEBPACK_IMPORTED_MODULE_2__[\"router\"].unSelect() }),\n                    react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"PanelTabs\"], { currentSelectedKey: _core__WEBPACK_IMPORTED_MODULE_2__[\"router\"].selectedTab, onSelect: key => _core__WEBPACK_IMPORTED_MODULE_2__[\"router\"].select({ tab: key }), items: this.tabs }))) },\n                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"div\", { className: \"treatment-editor\" },\n                    _core__WEBPACK_IMPORTED_MODULE_2__[\"router\"].selectedTab === \"details\" ? (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"SectionComponent\"], { title: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Treatment Details\") },\n                        react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"div\", { className: \"treatment-input\" },\n                            react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"TextField\"], { label: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Treatment title\"), value: this.selectedTreatment.type, onChange: (ev, val) => (this.selectedTreatment.type = val), disabled: !this.canEdit, \"data-testid\": \"treatment-title\" }),\n                            react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"TextField\"], { label: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Treatment expenses (per unit)\"), type: \"number\", value: this.selectedTreatment.expenses.toString(), onChange: (ev, val) => (this.selectedTreatment.expenses = Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"num\"])(val)), prefix: _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].getSetting(\"currencySymbol\"), disabled: !this.canEdit, \"data-testid\": \"treatment-expenses\" })))) : (\"\"),\n                    _core__WEBPACK_IMPORTED_MODULE_2__[\"router\"].selectedTab === \"delete\" ? (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"div\", null,\n                        react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"br\", null),\n                        react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"MessageBar\"], { messageBarType: office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"MessageBarType\"].warning }, Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Are you sure you want to delete\")),\n                        react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"br\", null),\n                        react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"PrimaryButton\"], { className: \"delete\", iconProps: {\n                                iconName: \"delete\"\n                            }, text: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Delete\"), onClick: () => {\n                                _modules__WEBPACK_IMPORTED_MODULE_3__[\"treatments\"].delete(_core__WEBPACK_IMPORTED_MODULE_2__[\"router\"].selectedID);\n                                _core__WEBPACK_IMPORTED_MODULE_2__[\"router\"].unSelect();\n                            } }))) : (\"\")))) : (\"\")));\n    }\n};\nObject(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"])([\n    mobx__WEBPACK_IMPORTED_MODULE_5__[\"computed\"]\n], Treatments.prototype, \"canEdit\", null);\nObject(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"])([\n    mobx__WEBPACK_IMPORTED_MODULE_5__[\"computed\"]\n], Treatments.prototype, \"selectedTreatment\", null);\nTreatments = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"])([\n    mobx_react__WEBPACK_IMPORTED_MODULE_6__[\"observer\"]\n], Treatments);\n\n\n\n//# sourceURL=webpack:///./src/modules/treatments/components/page.treatments.tsx?");

/***/ })

}]);