(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{322:function(e,t,n){"use strict";n.r(t),n.d(t,"StatisticsPage",function(){return d});var a=n(0),l=n(8),c=n(3),m=n(13),s=n(4),r=n(2),i=n(7),o=n(333),b=n(331),p=n(1);let d=class extends p.Component{constructor(){super(...arguments),this.appointment=null,this.charts=[m.A,m.F,m.mb,m.J,m.G,m.kb,m.K,m.y]}render(){return p.createElement("div",{className:"sc-pg p-15 p-l-10 p-r-10"},p.createElement(l.d,{maxItemsOnLoad:20,className:"appointments-data-table",heads:[Object(c.A)("Appointment"),Object(c.A)("Treatment"),Object(c.A)("Paid"),Object(c.A)("Outstanding"),Object(c.A)("Expenses"),Object(c.A)("Profits")],rows:m.fb.selectedAppointments.map(e=>({id:e._id,searchableString:e.searchableString,cells:[{dataValue:(e.patient||new m.l).name,component:p.createElement(l.i,{secondaryElement:p.createElement("span",null,Object(s.j)(e.date,m.bb.getSetting("date_format"))," ","/"," ",e.operatingStaff.map(e=>p.createElement("i",{key:e._id},e.name," "))),name:(e.patient||new m.l).name,size:3}),onClick:()=>{this.appointment=e},className:"no-label"},{dataValue:e.treatmentID,component:p.createElement(l.j,{text:e.treatment?e.treatment.type:"",subText:Object(s.j)(e.date,m.bb.getSetting("date_format")),size:3,onClick:()=>{}}),className:"hidden-xs"},{dataValue:e.paidAmount,component:p.createElement("span",null,m.bb.getSetting("currencySymbol")+Object(s.s)(e.paidAmount).toString()),className:"hidden-xs"},{dataValue:e.outstandingAmount,component:p.createElement("span",null,m.bb.getSetting("currencySymbol")+Object(s.s)(e.outstandingAmount).toString()),className:"hidden-xs"},{dataValue:e.expenses,component:p.createElement("span",null,m.bb.getSetting("currencySymbol")+Object(s.s)(e.expenses).toString()),className:"hidden-xs"},{dataValue:e.profit,component:p.createElement("span",null,m.bb.getSetting("currencySymbol")+Object(s.s)(e.profit).toString()),className:"hidden-xs"}]})),farItems:[{key:"1",onRender:()=>p.createElement(o.a,{placeholder:Object(c.A)("Filter by staff member"),defaultValue:"",options:[{key:"",text:Object(c.A)("All members")}].concat(m.db.list.map(e=>({key:e._id,text:e.name}))),onChange:(e,t)=>{m.fb.filterByMember=t.key.toString()}})}],hideSearch:!0,commands:[{key:"2",onRender:()=>p.createElement(b.a,{onSelectDate:e=>{e&&(m.fb.startingDate=m.fb.getDayStartingPoint(e.getTime()))},value:new Date(m.fb.startingDate),formatDate:e=>`${Object(c.A)("From")}: ${Object(s.j)(e,m.bb.getSetting("date_format"))}`})},{key:"3",onRender:()=>p.createElement(b.a,{onSelectDate:e=>{e&&(m.fb.endingDate=m.fb.getDayStartingPoint(e.getTime()))},value:new Date(m.fb.endingDate),formatDate:e=>`${Object(c.A)("Until")}: ${Object(s.j)(e,m.bb.getSetting("date_format"))}`})}]}),this.appointment?p.createElement(l.a,{key:"ae",loader:()=>a.b(this,void 0,void 0,function*(){const e=(yield n.e(17).then(n.bind(null,166))).AppointmentEditorPanel;return p.createElement(e,{appointment:this.appointment,onDismiss:()=>this.appointment=null,onDelete:()=>this.appointment=null})})}):"",p.createElement("div",{className:"container-fluid m-t-20 quick"},p.createElement(l.l,{title:Object(c.A)("Quick stats")},p.createElement(l.k,null,p.createElement(l.c,{sm:6,xs:12},p.createElement("label",null,Object(c.A)("Appointments"),":"," ",p.createElement(l.m,{text:Object(s.s)(m.fb.selectedAppointments.length).toString(),type:l.o.primary}))),p.createElement(l.c,{sm:6,xs:12},p.createElement("label",null,Object(c.A)("Payments"),":"," ",p.createElement(l.m,{text:m.bb.getSetting("currencySymbol")+Object(s.s)(m.fb.totalPayments).toString(),type:l.o.warning}))),p.createElement(l.c,{sm:6,xs:12},p.createElement("label",null,Object(c.A)("Expenses"),":"," ",p.createElement(l.m,{text:m.bb.getSetting("currencySymbol")+Object(s.s)(m.fb.totalExpenses).toString(),type:l.o.danger}))),p.createElement(l.c,{sm:6,xs:12},p.createElement("label",null,Object(c.A)("Profits"),":"," ",p.createElement(l.m,{text:m.bb.getSetting("currencySymbol")+Object(s.s)(m.fb.totalProfits).toString(),type:l.o.success})))))),p.createElement("div",{className:"charts container-fluid"},p.createElement("div",{className:"row"},this.charts.map((e,t)=>p.createElement("div",{key:t+e.name,className:"chart-wrapper "+(e.className||"col-xs-12 col-md-5 col-lg-4")},p.createElement(l.l,{title:Object(c.A)(e.name)},p.createElement(e.Component,null)))))))}};a.c([r.k],d.prototype,"appointment",void 0),a.c([r.k],d.prototype,"charts",void 0),d=a.c([i.a],d)}}]);