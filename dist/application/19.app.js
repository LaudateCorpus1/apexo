(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{321:function(e,t,n){"use strict";n.r(t),n.d(t,"Treatments",function(){return h});var s=n(1),a=n(7),l=n(3),c=n(9),i=n(5),r=n(2),d=n(8),m=n(295),o=n(28),p=n(301),b=n(297),u=n(0);let h=class extends u.Component{constructor(){super(...arguments),this.selectedID=l.y.currentLocation.split("/")[1]}get canEdit(){return l.C.currentUser.canEditTreatments}get selectedIndex(){return c.lb.list.findIndex(e=>e._id===this.selectedID)}get selectedTreatment(){return c.lb.list[this.selectedIndex]}render(){return u.createElement("div",{className:"tc-pg p-15 p-l-10 p-r-10"},u.createElement(a.e,{onDelete:this.canEdit?e=>{c.lb.deleteModal(e)}:void 0,commands:this.canEdit?[{key:"addNew",title:"Add new",name:Object(l.B)("Add new"),onClick:()=>{const e=new c.y;c.lb.list.push(e),this.selectedID=e._id},iconProps:{iconName:"Add"}}]:[],heads:[Object(l.B)("Treatment"),Object(l.B)("Expenses/unit"),Object(l.B)("Done appointments"),Object(l.B)("Upcoming appointments")],rows:c.lb.list.map(e=>{const t=(new Date).getTime();let n=0,s=0;const i=c.B.list;for(let a=0;a<i.length;a++){const l=i[a];l.treatmentID===e._id&&(l.date>t&&s++,l.isDone&&n++)}return{id:e._id,searchableString:e.searchableString,cells:[{dataValue:e.type,component:u.createElement(a.l,{text:e.type,subText:`${Object(l.B)("Expenses")}: ${c.db.getSetting("currencySymbol")}${e.expenses} ${Object(l.B)("per unit")}`}),onClick:()=>{this.selectedID=e._id},className:"no-label"},{dataValue:e.expenses,component:u.createElement("span",null,c.db.getSetting("currencySymbol"),e.expenses),className:"hidden-xs"},{dataValue:n,component:u.createElement("span",null,n," ",Object(l.B)("done")),className:"hidden-xs"},{dataValue:s,component:u.createElement("span",null,s," ",Object(l.B)("upcoming")),className:"hidden-xs"}]}}),maxItemsOnLoad:20}),this.selectedTreatment?u.createElement(m.a,{isOpen:!!this.selectedTreatment,type:o.a.medium,closeButtonAriaLabel:"Close",isLightDismiss:!0,onDismiss:()=>{this.selectedID=""},onRenderNavigation:()=>u.createElement(a.m,{className:"panel-heading"},u.createElement(a.c,{span:20},this.selectedTreatment?u.createElement(a.l,{text:this.selectedTreatment.type,subText:`${Object(l.B)("Expenses")}: ${c.db.getSetting("currencySymbol")}${this.selectedTreatment.expenses} ${Object(l.B)("per unit")}`}):u.createElement("p",null)),u.createElement(a.c,{span:4,className:"close"},u.createElement(p.a,{iconProps:{iconName:"cancel"},onClick:()=>{this.selectedID=""}})))},u.createElement("div",{className:"treatment-editor"},u.createElement(a.n,{title:Object(l.B)("Treatment Details")},u.createElement("div",{className:"treatment-input"},u.createElement(b.a,{label:Object(l.B)("Treatment title"),value:this.selectedTreatment.type,onChange:(e,t)=>c.lb.list[this.selectedIndex].type=t,disabled:!this.canEdit}),u.createElement(b.a,{label:Object(l.B)("Treatment expenses (per unit)"),type:"number",value:this.selectedTreatment.expenses.toString(),onChange:(e,t)=>c.lb.list[this.selectedIndex].expenses=Object(i.r)(t),prefix:c.db.getSetting("currencySymbol"),disabled:!this.canEdit}))))):"")}};s.c([r.k],h.prototype,"selectedID",void 0),s.c([r.d],h.prototype,"canEdit",null),s.c([r.d],h.prototype,"selectedIndex",null),s.c([r.d],h.prototype,"selectedTreatment",null),h=s.c([d.a],h)}}]);